<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Solana Blockchain Guide</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Overview</li><li class="chapter-item expanded "><a href="1. Overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="2. What is Blockchain & How it Works.html"><strong aria-hidden="true">2.</strong> Blockchain & How it Works</a></li><li class="chapter-item expanded "><a href="Solana Program teaser.html"><strong aria-hidden="true">3.</strong> Solana Program teaser</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Project 1: Favorites Program</li><li class="chapter-item expanded "><a href="3. Solana Project 1 - Section A.html"><strong aria-hidden="true">4.</strong> Solana Project 1 - Section A</a></li><li class="chapter-item expanded "><a href="4. Solana Project 1 - Section B.html"><strong aria-hidden="true">5.</strong> Solana Project 1 - Section B</a></li><li class="chapter-item expanded "><a href="5. Solana Project 1 - Section C.html"><strong aria-hidden="true">6.</strong> Solana Project 1 - Section C</a></li><li class="chapter-item expanded "><a href="6. Solana Project - Section D.html"><strong aria-hidden="true">7.</strong> Solana Project 1 - Section D</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Project 2: Voting Application</li><li class="chapter-item expanded "><a href="7. Installing Solana on a Local Dev Machine.html"><strong aria-hidden="true">8.</strong> Installing Solana on a Local Dev Machine</a></li><li class="chapter-item expanded "><a href="8. Creating the Voting Dapp.html"><strong aria-hidden="true">9.</strong> Creating the Voting Dapp</a></li><li class="chapter-item expanded "><a href="9. Understanding the Voting Dapp.html"><strong aria-hidden="true">10.</strong> Understanding the Voting Dapp</a></li><li class="chapter-item expanded "><a href="10. Testing Dapps.html"><strong aria-hidden="true">11.</strong> Testing Dapps</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Project 3: Integrating Blinks</li><li class="chapter-item expanded "><a href="11. Solana Blinks and Actions.html"><strong aria-hidden="true">12.</strong> Solana Actions and Blinks</a></li><li class="chapter-item expanded "><a href="12. Adding Blinks & Actions to Our Dapp.html"><strong aria-hidden="true">13.</strong> Adding Blinks & Actions to Our Dapp</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Solana Blockchain Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="solana-blockhain-guide"><a class="header" href="#solana-blockhain-guide">Solana Blockhain Guide</a></h2>
<p>This is a book version of <a href="https://www.youtube.com/watch?v=amAq-WHAFs8">Solana Blockchain Bootcamp 2024</a> powered by the <a href="https:///www.rust-lang.org/learn">Rust</a> programming language. <a href="https://www.typescriptlang.org/docs/handbook/intro.html">TypeScript</a> is another language used throughout the bootcamp, and thus, this guidebook.</p>
<p>You can use it a reference material for Fullstack Solana Development complemented with the official <a href="https://solana.com/docs">Solana documentation</a> for deeper concepts and know-how.</p>
<h3 id="conventions-used"><a class="header" href="#conventions-used">Conventions Used</a></h3>
<p>You would find the conventions used in this guidebook both consistent and very intuitive. For explictness reasons, here are the conventions used throught this guidebook.</p>
<ul>
<li>
<p>Terminal commands come in two variants; block and inline. Inline terminal commands are typed out in between text using the monospace font and trailed by a $ character, for example <code>$: ls</code>. Block terminal commands are written on a separate line without any trailing $ symbol.</p>
</li>
<li>
<p>Code identifiers such as struct and function names are written using the monospace font, e.g. struct <code>SetFavorites</code>. Non-code identifier keywords are also written in monospace font. Sometimes, to avoid code repetition in code snippets, ellipses <code>...</code> are used.</p>
</li>
<li>
<p>Some pages may contain little tidbit information worthy of remembering with a colored caption text that says <span style="color: orange;">Good to know</span>. In this guidebook, you will also find another class of noteworthy information with the caption <span style="color: orange;">Sidenote</span>, which tells you the things you require as you progress through the guidebook.</p>
</li>
</ul>
<h3 id="solana-examples"><a class="header" href="#solana-examples">Solana Examples</a></h3>
<ul>
<li>You can find concrete examples of Solana mini-apps from the official documentation on <a href="https://solana.com/docs">Solana Official Docs Page</a> for Solana.</li>
</ul>
<h3 id="contributions-and-support"><a class="header" href="#contributions-and-support">Contributions and Support</a></h3>
<ul>
<li>This guidebook would benefit greatly from any kind of support possible. With you support, the guidebook will deliver better value and satisfaction to the new and existing Solana developer. Reading this guidebook is another way you can offer your support and improve the correctness and learner-utitlity it strives to achieve. Should you find typos or inaccuracies in any chapter, page, paragraph or sentence in this guidebook, please feel free to contribute the necessary changes <a href="https://iodapson.github.io">here</a>. Please feel free to fork this guidebook and translate it into other languages.</li>
</ul>
<br/>
<p><em>Enjoy!</em></p>
<div style="break-before: page; page-break-before: always;"></div><p><span style="color: orange;">Bootcamp Outline:</span></p>
<ul>
<li>Blockchain Basis</li>
<li>End-to-end projects</li>
<li>Going to Production (Production pipeline)</li>
</ul>
<p><span style="color: orange;">Tutors:</span></p>
<ul>
<li>Jacob Creech</li>
<li>Brianna Migliaccio</li>
<li>Mike MacCana</li>
</ul>
<p><span style="color: orange;">Projects Built:</span></p>
<ol>
<li>Favorites program</li>
<li>Voting application</li>
<li>Blinks and Actions</li>
</ol>
<p><span style="color: orange;">Languages Used:</span></p>
<ul>
<li>Rust</li>
<li>Typescript</li>
</ul>
<p>--Start Date:
02:31AM - 02/11/2024 (WAT)</p>
<hr />
<p><span style="color: orange;">General Assumption:</span></p>
<p>In this written guide which is based on the Bootcamp course, it is assumed that you are using either a Linux machine or have WSL2 installed on your Windows machine provided you are on Windows. If you are a Mac user, the bootcamp course makes provision for you, and you might still find the contents of this guide to be non-conflicting with your machine. Stick around!</p>
<p>If you are on a Windows machine, but do not have WSL2 already installed, please do so now by first opening your <code>Windows Powershell</code> and then running command -</p>
<pre><code class="language-bash">wsl --install
</code></pre>
<p>If you are on Windows machine, and already have WSL1 installed, stick around. Sooner or later, you will upgrade to WSL2 in the process of following this written guide.</p>
<p>Also, if you are on a Windows machine, and are using WSL and perhaps unsure about what directory to use as your project's working directory, may I suggest something similar to - <code>cd ../../../../home/&lt;your-user-name&gt;</code>, so we can be on the same page (no pun intended) about stuff and the bootcamp in general.</p>
<hr />
<p><span style="color: orange;">IMPORTANT SOLANA GLOSSARY OF TERMS:</span></p>
<ul>
<li>
<p><span style="color: orangered;">Account:</span>
A record in the Solana ledger that either holds data or is an executable program. An account is addressable by a key, often referred to as a public key or pubkey.</p>
</li>
<li>
<p><span style="color: orangered;">App:</span>
A front-end application that interacts with a Solana cluster.</p>
</li>
<li>
<p><span style="color: orangered;">Client:</span>
A computer program that accesses the Solana server network cluster.</p>
</li>
<li>
<p><span style="color: orangered`;">Program:</span>
Onchain program / smart contract.</p>
</li>
<li>
<p><span style="color: orangered;">Onchain program:</span>
The executable code on Solana blockchain that interprets the 'instructions' sent inside of each 'transaction' to read and modify accounts over which it has control. These programs are often referred to as &quot;smart contracts&quot; on other blockchains.</p>
</li>
<li>
<p><span style="color: orangered;">Instructions:</span>
A call to invoke a specific instruction handler in a program. An instruction also specifies which accounts it wants to read or modify, and additional data that serves as auxiliary input to the 'instruction handler'. A 'client' must include at least one instruction in a 'transaction', and all instructions must complete for the transaction to be considered successful.</p>
</li>
<li>
<p><span style="color: orangered;">Transaction:</span>
One or more instructions signed by a client using one or more keypairs and executed atomically with only two possible outcomes: success or failure.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><p>What is blockchain and how does it work?</p>
<p><span style="color: orange;">What Blockchain Is:</span></p>
<p>A distributed database that</p>
<ul>
<li>is a ledger</li>
<li>is stored in multiple locations around the world</li>
<li>has no central authority</li>
</ul>
<p><span style="color: orange;">Good to Know 1</span>: A block is a bundle of transactions.</p>
<p><span style="color: orange;">Good to Know 2:</span> Blockchain uses digital signatures for peer to peer digital verification - it contains information about a transaction like the currency used, time of transaction, and the state of a transaction (which lets you know whether or not the transaction is successful).</p>
<p>Solana lets you perform fast secure payments in any currency such as Bitcoin.</p>
<p><span style="color: orange;">What a Smart Contract Is:</span></p>
<ul>
<li>
<p>They are programs that run on blockchain as its hosting service or cloud provider.</p>
</li>
<li>
<p>Smart contracts are like APIs invoked by instructions instead of HTTP requests.</p>
</li>
<li>
<p>Smart contracts write changes out to the blockchain as an effect just like an api gives reponses as an effect of being used.</p>
</li>
<li>
<p>Smart contracts extend blockchain beyond simple payments, such as, lending money without a bank, exchanging items directly with each other, create lottery without a lottery issuer, e.t.c</p>
</li>
</ul>
<p><span style="color: orange;">Cryptography In Blockchain:</span></p>
<p>Users of blockchain each have a keypair (private key &amp; public key).</p>
<p><span style="color: orange;">Good to Know 3:</span> private keys are used to sign transactions which proves that you made a transaction while your public key is an address where people can go to for transactions with you.</p>
<p><span style="color: orange;">Solana Wallet:</span>
Is an address with a small balance of 'Sol'. Users can interact with a Solana smart contract using 'sol'. For example, a user's private key can be instructed to sign a transaction on the Solana blockchain, then transfer the Sol using the system program's transfer function, and then write a note about the transaction using the system's memo program's memo function (of the smart contract, maybe? or perhaps of the Solana blockchain). These steps are called instructions.</p>
<p><span style="color: orange;">Key Takeway:</span></p>
<p>You as a Solana Developer would create Solana apps that interact with a Solana client's account / Solana client's ledger that is either an executable program or holds data for the Solana client - a Solana client is computer program that accesses the Solana server network cluster, and your app interacts with a Solana account by executing smart contracts or so-called 'onchain programs' on the Solana blockchain which invoke instruction handlers to handle a client's signed instruction / initiated transactions that modify the client's account on the blockchain.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="solana-program-teaser"><a class="header" href="#solana-program-teaser">Solana Program teaser</a></h3>
<p>Here is a quick and immersive introduction to the first Solana program developed in the Solana Bootcamp - 2024.</p>
<p>The Solana program below allows a user to save a favorite to the blockchain. The user can sign and run a favorite saving transaction, and would get charged for it.</p>
<pre><code class="language-rs">use anchor_lang::prelude::*;
// Please note that a program has a id also called an 'address' that will be automatically assigned to you when you deploy your Solana program using the Solana playground
declare_id!(&quot;&quot;);

pub const ANCHOR_DESCRIMINATOR_SIZE: usize = 8; // Your program will need 8 bytes + the size of whatever you saving on the Solana blockchain. 'a_d_s' is something that is written to every account on the Solana blockchain by an Anchor program. | ANCHOR_DESCRIMINATOR_SIZE Purpose: It specifies the type of account it is. It is used by anchor for some of its checks.

// Anchor lets you take a regular Rust program and convert it into a Anchor program using the Solana macro '#[program]'. For example:
#[program] // '#[program]' would even apply reasonable defualts
pub mod favorites { // a regular program called favorites
    use super::*;

    // Now this function 'set_favorites()' would take instructions provided by clients, run them, and then save the results to the blockchain
    pub fn set_favorites() -&gt; Result&lt;()&gt; {
        // Fill in later
    }
}

// 'Favorites' is what we what to save to the blockchain
#[account] // This macro specifies to save struct 'Favorites' to an account
#[derive(InitSpace)] // This macro lets Anchor know how big the data is, and gives all the intances of the data (in this case, struct Favorites) the initspace attribute which is the total space used by all the items inside
pub struct Favorites {
    pub number: u64,

    // You do need to also specify the size of each field in the struct. This is especially the case for a String data type which essentially has no default max size
    #[max_len(50)] // (50) as in 50 bytes
    pub color: String,

    #[max_len(5, 50)] // (5, 50) as in, 5 strings max, with each string being 50 bytes max
    pub hobbies: Vec&lt;String&gt;,
}

// Note that when your 'set_favorites' function is called, the instruction runner will need to provide a list of accounts involved with what they are going to modify on the blockchain - the account to be modified, the account that would sign the modifications, e.t.c
// Also note that Solana can process multiple transactions on different accounts at the same time

// Struct of accounts for the 'set_favorites' instruction handler
#[derive(Accounts)]
pub struct SetFavorites&lt;'info&gt; { // this struct holds every meta data needed for a successful 'set_favorites' action - the destination account to add a favorite to, the signer (instruction runner)

    #[account(mut)] // the account of the instruction runner needs to be mutable since they will be paying to execute the 'set_favorites' instruction handler
    pub user: Signer&lt;'info&gt;,

    // the actual account of all favorites set by users of our 'set_favorites' instruction handler
    #[account(
        init_if_needed, // make a new 'favorites' account if it doesn't already exist
        payer = user, // the payer signs and gets charged for the transaction of adding a favorite
        space = ANCHOR_DESCRIMINATOR_SIZE + Favorites::INIT_SPACE, // how much space favorites need
        seeds = [b&quot;favorites&quot;, user.key().as_ref()], // this is a PDA used to give a non-user account (e.g, favorites) an address on the blockchain
        bump // Used to calculate the seed provided above
    )]
    pub favorites: Account&lt;'info, Favorites&gt;,

    pub system_program: Program&lt;'info, System&gt;,
}

</code></pre>
<p>Phew! Although fun, the program above contained a lot of comments. This was done to provide as much base understanding as possible and needed to make sense of fundamental Solana patterns. The remainder of this guide book does not contain nearly as much comments.</p>
<div style="break-before: page; page-break-before: always;"></div><p><span style="color: orange;">Project Memo:</span>
A smart contract to save your favorite things to the blockchain.</p>
<p><span style="color: orange;">Lessons:</span></p>
<ul>
<li>How you can save, update, and delete information from the blockchain.</li>
<li>How to sign transactions. Using signing to control access in a smart contract.</li>
</ul>
<p><span style="color: orange;">Tool Used:</span> Solana playground.</p>
<p>What is Solana playground?
It is a tool provided by Solana that lets you quickly create Solana programs / smart contracts directly in your web browser without installing anything on your local machine.</p>
<p><span style="color: orange;">Good to Know 1:</span> In solana, your smart contract or solana programs can be used to store additional data besides keypairs for a user of the smart contract in what is called 'Program Derived Addresses'.</p>
<p><span style="color: orange;">Good to Know 2:</span>
What is a PDAs (Program Derived Addresses)? They are not made from a public key. They are made from seeds, which can be anything of your choosing as the programmer of the smart contract.</p>
<p><span style="color: orange;">Example 1 of a PDA:</span>
For example, you can make a PDA from a config file's string value as its seed. &quot;You an make a PDA from the seed config as a string&quot;. So when you need to find your program config, look for the PDA made from that seed and you'll find your seed. This effectively suggests to me that the config string value is used as a seed which is encrypted into a PDA, and then such PDA would be decrypted to its seed - the config string.</p>
<p><span style="color: orange;">Example 2 of a PDA:</span>
Storing someone's review of a movie. Here's a seeding idea to make such a PDA - a combination of the reviewer (user Alice)'s wallet address and the string &quot;Titanic&quot; to the store the movie review.
And for another user - Bob, you can combine Bob's wallet address and his reviewed movie name &quot;Titanic&quot; to store his review.</p>
<p><span style="color: orange;">What a PDA conceptually is:</span>
A row of data whereby each seed in the PDS is the primary key used to find the actual data associated with the seed.</p>
<div style="break-before: page; page-break-before: always;"></div><p><span style="color: orange;">About the Project 1:</span>
A program that save a user's favorite things on the blockchain and use the user's digital signatures to ensure that only the user can access and update their review using the user's wallet address to identify the user?</p>
<p><span style="color: orange;">About Project 1's Alternate Description:</span>
A program that save someone's favorite things to the blockchain and uses digital signature to ensure that only the wallet holder can update thier own favorites.</p>
<p><span style="color: orange;">Again, Tools Used:</span></p>
<ul>
<li>Solana playground</li>
<li>Anchor (which is Solana's most popular framework for making Solana programs, aka, Solana smart contracts).</li>
</ul>
<p><span style="color: orange;">Solana Playground Link:</span>
https://beta.solpg.io/</p>
<p><span style="color: orange;">STEPS:</span></p>
<ol>
<li>
<p>Go to the Solana playground.</p>
</li>
<li>
<p>Click the 'Create a new project' button.</p>
</li>
<li>
<p>Give your project its name.</p>
</li>
<li>
<p>Click on the 'Anchor (Rust)' button.</p>
</li>
<li>
<p>Then press the 'Create' button. This automatically creates a Solana project for you with a src/lib.rs file included.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h3 id="your-first-taste-of-a-solana-program"><a class="header" href="#your-first-taste-of-a-solana-program">Your First Taste of a Solana Program</a></h3>
<p>Now let's look at a somewhat complete code for a program that saves a user's favorite to the blockchain. If you already read the <a href="Solana%20Program%20teaser.html">Solana Program teaser</a>, then you already have a good idea of what most of the code herein is does:</p>
<pre><code class="language-rs">use anchor_lang::prelude::*;
declare_id!(&quot;&quot;);

pub const ANCHOR_DESCRIMINATOR_SIZE: usize = 8;


// 'Favorites' is what we what to save to the Blockchain
#[account]
#[derive(InitSpace)]
pub struct Favorites {
    pub number: u64,

    #[max_len(50)] // (50) as in 50 bytes
    pub color: String,

    #[max_len(5, 50)]
    pub hobbies: Vec&lt;String&gt;,
}

// this struct holds every meta data needed for a successful 'set_favorites' action - the destination account to add a favorite to, the signer (instruction runner), &amp; the system_program
#[derive(Accounts)]
pub struct SetFavorites&lt;'info&gt; {

    #[account(mut)]
    pub user: Signer&lt;'info&gt;,

    // An act account for all favorites set per user of our 'set_favorites' instruction handler
    #[account(
        init_if_needed,
        payer = user,
        space = ANCHOR_DESCRIMINATOR_SIZE + Favorites::INIT_SPACE,
        seeds = [b&quot;favorites&quot;, user.key().as_ref()], // a PDA used to give a non-user account (e.g, favorites) an address on the Blockchain
        bump // Used to calculate the seed provided above
    )]
    pub favorites: Account&lt;'info, Favorites&gt;,

    pub system_program: Program&lt;'info, System&gt;,
}


#[program]
pub mod favorites {

    use super::*;

    // Now function 'set_favorites()' would take instructions provided by clients, run them, and then save the results to the Blockchain
    pub fn set_favorites(context: Context&lt;SetFavorites&gt;,
        number: u64,
        color: String,
        hobbies: Vec&lt;String&gt;
    ) -&gt; Result&lt;()&gt; {

        let user_public_key = context.accounts.user.key();

        msg!(&quot;Greetings from {}&quot;, context.program_id);

        msg!(&quot;User {}'s favorite number is: {number}, favorite color is: {color}, and hobbies are: {hobbies:?}&quot;, user_public_key);

        // this is the code line that actually writes a new favorite into the favorites account
        context.accounts.favorites.set_inner(
            Favorites {
                number,
                color,
                hobbies,
            }
        );

        Ok(())
    }

}
</code></pre>
<p>After typing the above code into the online Solana Explorer's editor, click on the <code>Build</code> button inside the Solana Explorer.</p>
<p>Upon a successful build of the program, click on <code>Deploy</code>.</p>
<p>At this stage, when you attempt to deploy though, you will most likely be prompted about two things:</p>
<ul>
<li>
<p>Whether or not to save a <code>keypair</code>. Note that you do not have to. You can simply click the <code>Continue</code> button.</p>
</li>
<li>
<p>Secondly, your low balance of <code>sol</code>. You will be asked to choose whether or not to request for an airdrop (as in, acquire free dev-net <code>sol</code>) from inside the Solana Explorer command-prompt. For now, type and enter <code>no</code> into the command line.</p>
</li>
</ul>
<p>You can actually request for an airdrop from the Solana explorer. You need to first click on your devnet address which opens a new browser tab to the Solana Explorer website. Next copy your <code>Address</code>, and head over to <a href="https://faucet.solana.com">https://faucet.solana.com</a>, paste your copied address into the <code>Wallet Address</code> input, choose an <code>Amount</code> (preferably, 5), and then click the <code>Confirm Airdrop</code> button. You should see a prompt that says &quot;Airdrop was successful!&quot;.</p>
<p>Now go back to the Solana Playground, and click on the <code>Deploy</code> button. After a successful transaction, go back to your Wallet page on the Solana Explorer, scroll down to your <code>Transaction History</code>, and click the refresh button to see the transaction history with the latest transaction updates.</p>
<hr />
<p>You can search for your Solana account on the blockchain by copying your program's account <code>id</code> inside the macro <code>declare_id!()</code> and pasting it into the Solana Explorer search bar as a search query.</p>
<hr />
<p>Your Solana explorer link to request for an airdrop would vary depending on your <code>declare_id!()</code> value. For example, let's say your <code>declare_id!()</code> value is <code>ww9C83noARSQVBnqmCUmaVdbJjmiwcV9j2LkXYMoUCV</code>, then, your appropriate Solana explorer link would then be - https://explorer.solana.com/address/ww9C83noARSQVBnqmCUmaVdbJjmiwcV9j2LkXYMoUCV?cluster=devnet</p>
<hr />
<p>For visuals on how to deploy this Solana program using the Solana Explorer , watch the bootcamp course video from [30:21 - 32:50].</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="invoking-your-solana-program-on-the-solana-playground"><a class="header" href="#invoking-your-solana-program-on-the-solana-playground">Invoking Your Solana Program on the Solana Playground</a></h3>
<p>Let's head over to the Solana playground after successfully deploying our Solana program.</p>
<ul>
<li>
<p>Click on the test-tube icon that says <code>Test</code> when highlighted.</p>
</li>
<li>
<p>Provide input values for <code>Instructions</code> - <code>setFavorites</code> - <code>Args</code>. I used values - <pre>
7 for number
red for color
[&quot;hello&quot;, &quot;hi&quot;, &quot;salute&quot;, &quot;bonjour&quot;, &quot;hola&quot;] for hobbies
</pre></p>
</li>
<li>
<p>Provide input values for <code>Instructions</code> - <code>setFavorites</code> - <code>Accounts</code>. I selected values -</p>
<pre>
'Current wallet' for user
'From seed' for favorites
</pre>
<p>Now click the 'Add Seed' button,
For the seed(1): choose 'string', then type '&quot;favorites&quot;' and click 'Custom'</p>
<p>Click the 'Add Seed' button again to add a seed(2)
For the seed(2): choose 'publicKey'
Next, click the seed(2) input box again, and this time click 'Current wallet'.</p>
<p>Now click on the <code>Generate</code> - <code>Test</code> and watch your test pass. Click the 'Solana explorer' pop-up to see your test result on the Solana explorer.</p>
</li>
</ul>
<hr />
<p>For visuals on how to this project's Solana program from inside the Solana Explorer , watch the bootcamp course video from [32:51 - 34:56].</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="find-out-how-to-make-solana-apps-on-your-local-dev-machine"><a class="header" href="#find-out-how-to-make-solana-apps-on-your-local-dev-machine">Find out How to Make Solana Apps on Your Local Dev Machine</a></h3>
<p>Some Key Chapter Lessons</p>
<ul>
<li>Calculate votes</li>
<li>User (voter) verification</li>
<li>Account management</li>
<li>Build using PDAs</li>
</ul>
<p>Tutor &amp; Project Lead: Jacob Creech</p>
<p><b>Getting Started:</b></p>
<p>For references, please visit the Anchor Installation webpage here - <a href="https://www.anchor-lang.com/docs/installation">https://www.anchor-lang.com/docs/installation</a></p>
<p>Please note that if you're on Windows, it is recommended that you install WSL2 for your local development.</p>
<ol>
<li>
<p>Install Rust <a href="https://www.rust-lang.org/tools/install">Rust</a></p>
</li>
<li>
<p>Next up, please follow the installation instruction for <a href="https://solana.com/docs/intro/installation">Solana Installation here</a>. And just in case you encounter the error <code>error: linker 'cc' not found</code> or <code>error: could not exec the linker cc = note: Permission denied (os error 13)</code> in the process of following this guide to install anchor on your Linux system, then first run this command to fix this error;</p>
</li>
</ol>
<pre><code class="language-bash">sudo apt-get update &amp;&amp; sudo apt-get upgrade &amp;&amp; sudo apt-get install -y pkg-config build-essential libudev-dev libssl-dev
</code></pre>
<p><b>Important Notice:</b>
Please note that immediately after you have installed Anchor, but right before you use Yarn to create a new Anchor project, you should verify that the <code>PATH</code> enviroment variable was set up correctly by running command</p>
<pre><code class="language-bash">which anchor
</code></pre>
<p>Your output from running the bash command above should look similar to <code>/home/user/.cargo/bin/anchor</code>. If the command fails or the output is empty, make sure to add the <code>~/.cargo/bin</code> directory to the <code>PATH</code> environment variable. Since this guide assumes you are using a bash terminal on WSL2, the command to use will be:</p>
<pre><code class="language-bash">echo 'export PATH=&quot;$HOME/.cargo/bin:$PATH&quot;' &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<p>For more information about other terminals (e.g Fish, and Zsh), check the bottom section of this <a href="https://www.anchor-lang.com/docs/installation">Anchor Installation page</a>. You may also want to follow the Generating Shell Completions guide on the page.</p>
<p><b>Moving On...</b>
If you would like to add the avm binary to your path (recommended), then please apply the following command, replacing <code>&lt;your-user-name-here&gt;</code> with your actual user name:</p>
<pre><code class="language-bash">export PATH=&quot;/home/&lt;your-user-name-here&gt;/.avm/bin:$PATH&quot;
</code></pre>
<p>Then to confirm that the avm binary has been added to your PATH, run command:</p>
<pre><code class="language-bash">echo $PATH
</code></pre>
<hr />
<p>Now you can resume following the <a href="https://solana.com/docs/intro/installation">Solana Installation here</a> to create a new Solana project using Yarn.</p>
<h4 id="wsl-information"><a class="header" href="#wsl-information">WSL Information:</a></h4>
<p>Please note that if you are a Windows user, you need to be using WSL2 instead of WSL1. To verify the version of WSL that you are using, please run the following command on your <code>Windows Powershell</code>:</p>
<pre><code class="language-bash">wsl -l -v
</code></pre>
<p>The Solana installation guide recommends that you use NVM (Node Virtual Manager), and guess what, if you try to install NVM on WSL1, NVM would recommend that you use WSL2. Read the rest of this section</p>
<p>To upgrade from WSL1 to WSL2, you need to:</p>
<ul>
<li>Enable the virtual machine optional component used by WSL 2, and Download the Linux kernel update package. Use this link to find out how you can do both - <a href="https://learn.microsoft.com/en-us/windows/wsl/install-manual#step-3---enable-virtual-machine-feature">https://learn.microsoft.com/en-us/windows/wsl/install-manual#step-3---enable-virtual-machine-feature</a>. Please, remember to upgrade your WSL from inside Windows Powershell using command - <code>wsl --set-version &lt;distro name&gt; 2</code> after enabling the virtual machine optional componsnet used by WSL 2, and downloading the Linux kernel update package.</li>
</ul>
<p>For more information on how to Upgrade WSL version from WSL 1 to WSL 2, review the section of this page - <a href="https://learn.microsoft.com/en-us/windows/wsl/install#upgrade-version-from-wsl-1-to-wsl-2">https://learn.microsoft.com/en-us/windows/wsl/install#upgrade-version-from-wsl-1-to-wsl-2</a></p>
<p>For more information on how to Enable Virtual Machine Feature and Download the Linux kernel update package, then review Step 3 and Step 4 of this page - <a href="https://learn.microsoft.com/en-us/windows/wsl/install-manual#step-3---enable-virtual-machine-feature">https://learn.microsoft.com/en-us/windows/wsl/install-manual#step-3---enable-virtual-machine-feature</a></p>
<!--<h4 id="hold-on"><a class="header" href="#hold-on">Hold On..</a></h4>

Provided that you have been following the installation guide here - [https://solana.com/docs/intro/installation](https://solana.com/docs/intro/installation), please note that you don't have any need to run command `$ anchor build` just yet. You also do not yet need to follow the remainder of the installation guide, specifically the section on [Solana CLI Basics](https://solana.com/docs/intro/installation#solana-cli-basics). Why? You see, Solana has `Testnet`, `Devnet`, and `Mainnet` and this course starts out with just the `Testnet`, but the Solana CLI Basics section of the Solana Installation guide would get you configurations for Solana `Mainnet` for your machine. Right now you only need to deal with Solana `Testnet`. No worries we'll come around to start dealing with the `Devnet` and `Mainnet` sooner or later as you work your way through the bootcamp.-->
<hr />
<p>Congratulations! Now you are good to go to create awesome Solana projects.</p>
<hr />
<iframe src="https://solana.com/docs/intro/installation" frameborder="0" style="width: 100%; min-height: 480px;"></iframe>
<hr />
<p>Timestamp - [37:40 - 43:47]</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="find-out-how-to-create-a-solana-app-quickly-from-an-official-template"><a class="header" href="#find-out-how-to-create-a-solana-app-quickly-from-an-official-template">Find Out How to Create a Solana App Quickly from an Official Template</a></h3>
<p>Do the following in the order listed:</p>
<p><span style="color: orange;">1.</span> Inside your <code>WSL</code> terminal, <code>cd</code> or <code>mkdir</code> the directory of your choice for the project. In my case it looks like this <code>/home/&lt;my-user-name&gt;/solana-bootcamp/bootcamp-temp</code>.</p>
<br />
<p><span style="color: orange;">2.</span> Run an npx command to create a new Solana app using a ready-made template:</p>
<pre><code class="language-bash">npx create-solana-dapp
</code></pre>
<p><b>Please Note:</b></p>
<p>If you asked for permission to install for example <code>create-solana-dapp@4.1.0</code>, simply press the 'Enter' key on your keyboard to proceed.</p>
<p>In the Solana bootcamp, the name of the app was - <code>voting-dapp</code>, the selected framework was - <code>Next.js</code>, the selected template was - <code>next-tailwind-counter (Next.js + Tailwind CSS + Anchor Counter Example)</code>.</p>
<p>--it takes a while to install via npm, so now might be the right time to go have some snack or distract yourself with something else.</p>
<br />
<p><span style="color: orange;">3.</span> Cd in to the <code>voting-dapp</code>, and run the npm installation command (you can use npm locally):</p>
<pre><code class="language-bash">npm i
</code></pre>
<p>On my WSL (2) installation on my Windows 10 machine, <code>Installing via npm</code> never completes (I don't know I didn't stick around beyond 3 hours to find out if it would still finish the install). If that is the case for you too, don't panic, simple cancel the installation and do the following:</p>
<ul>
<li>Install a lower version of Node using nvm:</li>
</ul>
<pre><code class="language-bash">nvm install 23.0.0
</code></pre>
<ul>
<li>Downgrade to a lower version of npm:</li>
</ul>
<pre><code class="language-bash">npm install npm@9.7.1 -g
</code></pre>
<ul>
<li>Use Node version 23.0.0 (although you may find that nvm already uses this version especially if you have just installed it):</li>
</ul>
<pre><code class="language-bash">nvm use 23.0.0
</code></pre>
<p>Reference - <a href="https://github.com/npm/cli/issues/7857#issuecomment-2424107768">https://github.com/npm/cli/issues/7857#issuecomment-2424107768</a></p>
<ul>
<li>Optionally exit out of WSL, re-open it, and cd into the directory containing your project. For me, my project's cd command was <code>$: cd ../../../../home/&lt;my-user-name&gt;/solana-github/bootcamp-temp/voting-dapp</code></li>
</ul>
<br />
<p><span style="color: orange;">4.</span> Run the now installed <code>voting-dapp</code> using npm with command:</p>
<pre><code class="language-bash">npm run dev
</code></pre>
<p>Please note that if you had problems with your project and had to tweak your installed <code>Node</code> and <code>nmp</code> versions, it would be best for you to delete your existing <code>voting-app</code>, and re-create another one, and then cd into it, and run <code>$: npm run dev</code>.</p>
<p>Also note that the <code>voting-dapp</code> will run at <code>localhost:3000</code> by default. Feel free to check it out.</p>
<br />
<p><span style="color: orange;">5.</span> Run the Solana <code>Testnet</code> validator toolchain in another WSL terminal using command:</p>
<pre><code class="language-bash">solana-test-validator
</code></pre>
<p>You may nagivate to a parent directory of your <code>voting-dapp</code> project's working directory before running the <code>solana-test-validator</code> command.</p>
<p>Note that the Solana <code>Testnet</code> validator will run at port '8899' (<code>http://127.0.0.1:8899</code>) by default. And this <code>solana-test-validator</code> creates a new directory named <code>test-ledger</code>.</p>
<p><b>Good to Know :</b></p>
<p>You can check out <code>http://127.0.0.1:8899</code> and click on the button right next to your <code>Select Wallet</code> button that says <code>devnet</code> and then click on <code>local</code> from the drop-down. Optionally click on the <code>Account</code> menu to see information about the amount of Sol that you have locally. If you have followed this guide up till now, there will be no account to display. We'll fix that soon in step 6.</p>
<p>You can also use the Solana Explorer website <a href="https://explorer.solana.com">https://explorer.solana.com</a> to look at everything that is happening on your local Validator. Simply click on the green button on the webpage that says <code>Mainnet Beta</code>, and then choose <code>Custom RPC URL</code> from the drop-down options.</p>
<br />
<p><span style="color: orange;">6.</span> Create your Solana wallet:</p>
<p>Now that everything pretty much works, namely - your project template was installed successfully, runs without any hitch, and can be read from the Solana Explorer website, it is now time to create your Solana wallet. Do the following:</p>
<ul>
<li>
<p>Stop your voting-dapp and solana-test-validator using <code>Ctrl + C</code>, if it is currently running.</p>
</li>
<li>
<p>Follow the remainder of the instructions on this Solana Installation doc section of the webpage: <a href="https://solana.com/docs/intro/installation#solana-cli-basics">https://solana.com/docs/intro/installation#solana-cli-basics</a>. You do not have to change anything or make any choice unless you are told explicitly to do so.</p>
</li>
</ul>
<p><b>Also</b>, please note that you should have your Solana project (e.g, 'voting-dapp) running using command:</p>
<pre><code class="language-bash">npm run dev
</code></pre>
<p>then</p>
<pre><code class="language-bash">solana config set -ul
</code></pre>
<p>...before actually running the solana-test-validator command on a separate terminal:</p>
<pre><code class="language-bash">solana-test-validator
</code></pre>
<p>Whether you run <code>solana-test-validator</code> before or after <code>npm run dev</code> doesn't actually matter.</p>
<p><b>Good to Know :</b></p>
<p>You only need to <code>$: solana config get</code> once. You can check your Solana balance using command:</p>
<pre><code class="language-bash">solana balance
</code></pre>
<p>You can check your Solana address / pubkey using command:</p>
<pre><code class="language-bash">solana address
</code></pre>
<p>And you can actually change your wallet address / generate a new one using command:</p>
<pre><code class="language-bash">solana-keygen new --force
</code></pre>
<br />
<h4 id="helpful-solana-config-commands-include"><a class="header" href="#helpful-solana-config-commands-include">Helpful Solana config commands include:</a></h4>
<pre><code class="language-cmd">solana config get
</code></pre>
<pre><code class="language-cmd">solana config set --url mainnet-beta
solana config set --url devnet
solana config set --url localhost
solana config set --url testnet
</code></pre>
<p>OR</p>
<pre><code class="language-cmd">solana config set -um    # For mainnet-beta
solana config set -ud    # For devnet
solana config set -ul    # For localhost
solana config set -ut    # For testnet
</code></pre>
<p><b>For the Windows user:</b></p>
<p>You can actually run wsl from VS code. Simple use your wsl terminal to navigate to the directory containing your code files and then use the <code>$: code .</code> command to open the project in VS Code.</p>
<p>It is very likely that when you run <code>$: solana --version</code> on VS-code for the first time as decribed above, it would see as though the solana-cli is lost on your machine (not installed anymore). Fret not, simply run the following command to fix this minor issue once and for all:</p>
<pre><code class="language-bash">export PATH=&quot;$HOME/.local/share/solana/install/active_release/bin:$PATH&quot;
</code></pre>
<p>Finally, please note that you have to navigate to the <code>anchor</code> directory inside your project, then enter the anchor build command before you actually run your Solana project using <code>$: npm run dev</code>. This is the anchor build command:</p>
<pre><code class="language-bash">anchor build
</code></pre>
<p>By building the anchor directory inside your project, you make it easier for your project to detect your Solana wallet and connect to it.</p>
<p>Timestamp - [43:48 - 49:25]</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="lets-first-address-the-design-to-understand-what-we-need-to-do-conceptually"><a class="header" href="#lets-first-address-the-design-to-understand-what-we-need-to-do-conceptually">Let's first address the design to understand what we need to do conceptually.</a></h3>
<br/>
<h4 id="its-design-specification"><a class="header" href="#its-design-specification">Its Design Specification</a></h4>
<!--![Screenshot of the voting dapp concept](./assets/Screenshot_20241116-124950.jpg 'Votingdapp diagramatic illustration')-->
<p><img src="./assets/The-Votingdapp-Design-Specification.png" alt="Screenshot of the Voting Dapp's Design Specification" title="The Voting Dapp Design Specification diagramatic explanation" /></p>
<ul>
<li>In the illustration above, we have two accounts - <code>Poll</code> and <code>Candidate</code>, and for each account we've specified the data we want stored inside it on the right-hand side of the screen, so for example, for Account <code>Poll</code>, we want to store - <code>poll_id</code>, <code>description</code>, <code>poll_start</code>, <code>poll_end</code>, and <code>candidate_amount</code>.</li>
<li>Whereas, for Account <code>Candidate</code>, we want to store - <code>candidate_name</code> and <code>candidate_amount</code>.</li>
<li>On the left-hand side of each Account, we specify the seed we want to use, so for example, for Account <code>Poll</code>, we use <code>poll_id</code> as its seeds, wherease for Account <code>Candidate</code>, we use <code>poll_id</code> + <code>candidate_name</code> as its seeds.</li>
<li>Finally, we have a set of Instructions namely; <code>Initialize_Poll</code>, <code>Initialize_Candidate</code>, and <code>Vote</code>.</li>
</ul>
<br/>
<h4 id="its-code"><a class="header" href="#its-code">Its Code:</a></h4>
<p>Before looking at the code for the <code>votingdapp</code>, it is recommended that you review the <a href="Solana%20Program%20teaser.html">Solana Teaser Page</a> especially if you unfamiliar with writing Solana smart contracts. Interestingly, you may gain better understanding of the code below by also reading the next page - <a href="10.%20Testing%20Dapps.html">Testing Dapps</a> side-by-side with the code.</p>
<p>Please note that it is known convention accross the Solana Dev community to name an <code>Account</code> provided as context (<code>Context</code>) for an instruction-function the same name as the instruction function itself. For example, if you have an instruction-function named <code>initialize_goodies</code>, then by convention, the function's <code>Account</code>-<code>context</code> is expected to be named <code>InitializeGoodies</code>.</p>
<pre><code class="language-rs">#![allow(clippy::result_large_err)]

use anchor_lang::prelude::*;

declare_id!(&quot;AsjZ3kWAUSQRNt2pZVeJkywhZ6gpLpHZmJjduPmKZDZZ&quot;);

#[program]
pub mod votingdapp {
  use super::*;

  pub fn initialize_poll(ctx: Context&lt;InitializePoll&gt;,
        poll_id: u64,
        description: String,
        poll_start: u64,
        poll_end: u64,
  ) -&gt; Result&lt;()&gt; {
    //... Extract an [account] inside Account 'InitializePoll'
    let poll = &amp;mut ctx.accounts.poll;
    poll.poll_id = poll_id;
    poll.description = description;
    poll.poll_start = poll_start;
    poll.poll_end = poll_end;
    poll.candidate_amount = 0;
    Ok(())
  }

  // Instruction 2:
  pub fn initialize_candidate(ctx: Context&lt;InitializeCandidate&gt;,
        candidate_name: String,
        _poll_id: u64
  ) -&gt; Result&lt;()&gt; {
    //... We will extract an [account] inside Account 'InitializeCandidate'
    let candidate = &amp;mut ctx.accounts.candidate;
    let poll = &amp;mut ctx.accounts.poll;
    poll.candidate_amount += 1;
    candidate.candidate_name = candidate_name;
    candidate.candidate_votes = 0;
    Ok(())
  }

  // Instruction 3:
  pub fn vote(ctx: Context&lt;Vote&gt;, _candidate_name: String, _poll_id: u64) -&gt; Result&lt;()&gt; {
    let candidate = &amp;mut ctx.accounts.candidate;
    candidate.candidate_votes += 1;
    msg!(&quot;Voted for candidate: {}&quot;, candidate.candidate_name);
    msg!(&quot;Votes: {}&quot;, candidate.candidate_votes);
    Ok(())
  }
}

/*
Unlike the other 'Accounts' defined in our smart-contract,
'Account' 'Vote' lacks a 'system_program' struct field because we would -
not be creating a new 'Vote'-'Account' into the Blockchain
*/
#[derive(Accounts)]
#[instruction(candidate_name: String, poll_id: u64)]
pub struct Vote&lt;'info&gt; {
  // the user is not a going to pay to use any account, hence why 'signer' is it not a [account(mut)]
  //#[account()]
  pub signer: Signer&lt;'info&gt;,

  // We provide just 'mut', 'seed' and 'bump' because we'll only reference and mutate 'Poll' from 'Vote'
  #[account(
    mut,
    seeds = [poll_id.to_le_bytes().as_ref()], //seeds = [b&quot;poll&quot;.as_ref()]
    bump,
  )]
  pub poll: Account&lt;'info, Poll&gt;,

  // We provide just 'mut', 'seed' and 'bump' because we'll only reference and mutate 'Candidate' from 'Vote'
  #[account(
    mut,
    seeds = [poll_id.to_le_bytes().as_ref(), candidate_name.as_bytes()],
    bump,
  )]
  pub candidate: Account&lt;'info, Candidate&gt;,
}

/*
Account 'InitializeCandidate'
*/
#[derive(Accounts)]
#[instruction(candidate_name: String, poll_id: u64)]
pub struct InitializeCandidate&lt;'info&gt; {
  #[account(mut)]
  pub signer: Signer&lt;'info&gt;,

  // We provide just a 'seed' and 'bump' because we'll only reference 'Poll'
  #[account(
    seeds = [poll_id.to_le_bytes().as_ref()], //seeds = [b&quot;poll&quot;.as_ref()]
    bump,
  )]
  pub poll: Account&lt;'info, Poll&gt;,

  #[account(
    init,
    payer = signer,
    space = 8 + Candidate::INIT_SPACE,
    seeds = [poll_id.to_le_bytes().as_ref(), candidate_name.as_bytes()], //seeds = [b&quot;poll&quot;.as_ref()]
    bump,
  )]
  pub candidate: Account&lt;'info, Candidate&gt;,

  pub system_program: Program&lt;'info, System&gt;
}

#[account]
#[derive(InitSpace)]
pub struct Candidate {
  #[max_len(180)]
  candidate_name: String,
  candidate_votes: u64,
}

#[derive(Accounts)]
#[instruction(poll_id: u64)]
pub struct InitializePoll&lt;'info&gt; {
  #[account(mut)]
  pub signer: Signer&lt;'info&gt;,

  #[account(
    init,
    payer = signer,
    space = 8 + Poll::INIT_SPACE,
    seeds = [poll_id.to_le_bytes().as_ref()],
    bump,
  )]
  pub poll: Account&lt;'info, Poll&gt;,

  pub system_program: Program&lt;'info, System&gt;
}

#[account]
#[derive(InitSpace)]
pub struct Poll {
  pub poll_id: u64,
  #[max_len(280)]
  pub description: String,
  pub poll_start: u64,
  pub poll_end: u64,
  pub candidate_amount: u64,
}

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="testing-our-dapp"><a class="header" href="#testing-our-dapp">Testing Our Dapp</a></h3>
<p>To run tests for our 'votingdapp', we need to install an npm tool called Anchor Bankrun, which is a testing framework that allows us to test our smart contract methods / instructions to make sure that our expected values occurs.</p>
<p>You can jump to a summary of testing Solana Dapps in general. <a href="10.%20Testing%20Dapps.html#key-notes">Jump to the key notes here</a></p>
<br />
<p><span style="color: orange;">1</span></p>
<h4 id="install-anchor-bankrun"><a class="header" href="#install-anchor-bankrun">Install anchor-bankrun</a></h4>
<p>You can use either <code>Yarn</code> or <code>Npm</code> to install anchor-bankrun (provided that you do not have it installed already; check the ending part of this section to know whether or not you already. have <code>anchor-bankrun</code> installed). Now make sure to <code>cd</code> into your dapp project's directory before running any one of the commands below:</p>
<p>For <code>Yarn</code>:</p>
<pre><code class="language-bash">yarn add anchor-bankrun
</code></pre>
<p>For <code>Npm</code>:</p>
<pre><code class="language-bash">npm install anchor-bankrun
</code></pre>
<p>The installation command for Anchor bankrun is:</p>
<pre><code class="language-bash">npm install anchor-bankrun
</code></pre>
<p>It is very likely that you already have it installed, especially if you used command <code>$: npx create-solana-dapp</code> to generate a starter template for your project.</p>
<p><b>Please Note:</b></p>
<p>All the tests done in this page utilizes <code>anchor-bankrun</code> instead of the local validator.</p>
<br />
<p><span style="color: orange;">2</span></p>
<h4 id="locate-and-edit-your-votingdappspects-file"><a class="header" href="#locate-and-edit-your-votingdappspects-file">Locate and edit your 'votingdapp.spec.ts' file</a></h4>
<p>This file can be found inside your project's <code>anchor - tests</code> folder.</p>
<p>Open your <code>votingdapp.spect.ts</code> file and clear most of the code that already exists inside it such that it now looks like this:</p>
<pre><code class="language-ts">import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { Keypair } from '@solana/web3.js';
import { Votingdapp } from '../target/types/votingdapp';

describe('votingdapp', () =&gt; {
	// 'votingdapp' is just called 'voting' in the bootcamp's demo
	it('Initialize Poll', async () =&gt; {
		// ...
	});
});
</code></pre>
<p>In the bootcamp course video, the <code>describe</code> function above has a first argument string value of <code>'voting'</code> instead of <code>'votingdapp'</code> (used in this guide book) - please note the slight difference.</p>
<br />
<p><span style="color: orange;">3</span></p>
<h4 id="choose-the-target-smart-contract-program-to-test"><a class="header" href="#choose-the-target-smart-contract-program-to-test">Choose the target smart contract program to test</a></h4>
<p>Each <code>$: anchor build</code> command compiles your project into a Solana binary that looks similar to this - <code>&lt;your-project-name&gt;.so</code>. This file is essentially the binary file we want to test each time we add new features to our dapp and rebuild it.</p>
<p>We need to first copy the generated <code>votingdapp.so</code> binary file of our 'votingdapp'. The <code>votingdapp.so</code> file can be located inside the <code>anchor - target - deploy</code> folder of our project's directory. Paste this file.</p>
<p>Next, paste the copied <code>votingdapp.so</code> binary file into the <code>anchor - tests - fixtures</code> folder. You may have to create a new <code>fixtures</code> folder if it does not already exist inside the <code>tests</code> folder. Please note that you will need to repeat this everytime you add new features to your program and want to test the new build of your program.</p>
<br />
<p><span style="color: orange;">4</span></p>
<h4 id="integrate-your-idl-file-into-your-dapps-spects-code"><a class="header" href="#integrate-your-idl-file-into-your-dapps-spects-code">Integrate your IDL file into your dapp's .spec.ts code.</a></h4>
<p>An IDL is an interface to help build and generate language-specific format for calling smart contracts similar to Ethereum's ABI. The <code>idl</code> for our Solana dapp can be found inside the <code>anchor - target - idl</code> folder. For our <code>votingdapp</code> dapp (in this written guide), the <code>idl</code> file is named <code>votingdapp.json</code>, whereas in the bootcamp course video, this file is called <code>voting.json</code> - please note the name difference.</p>
<p>To integrate the <code>idl</code> into our previously edited <code>votingdapp.spec.ts</code> <a href="10.%20Testing%20Dapps.html#locate-and-edit-your-votingdaapspects-file">code</a>, add the following <code>require</code> statement to <code>votingdapp.spec.ts</code>'s code:</p>
<pre><code class="language-ts">import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { Keypair } from '@solana/web3.js';
import { Votingdapp } from '../target/types/votingdapp';

const IDL = require('../target/idl/votingdapp.json');

describe('votingdapp', () =&gt; {
	it('Initialize Poll', async () =&gt; {
		// ...
	});
});
</code></pre>
<br />
<p><span style="color: orange;">5</span></p>
<h4 id="import-program-type-votingdapp-into-your-spects-test-file"><a class="header" href="#import-program-type-votingdapp-into-your-spects-test-file">Import program type 'Votingdapp' into your .spec.ts test file:</a></h4>
<p>This part has already been done for us. Do it manually if that is not the case for you:</p>
<pre><code class="language-ts">...

import { Votingdapp } from '../target/types/votingdapp';

...

</code></pre>
<p>In the bootcamp's video course, the specific object imported was <code>Voting</code> instead of <code>Votingdapp</code>, so please take note of this slight difference.</p>
<br />
<p><span style="color: orange;">6</span></p>
<h4 id="declare-your-program-address-pubkey-inside-votingdappspects"><a class="header" href="#declare-your-program-address-pubkey-inside-votingdappspects">Declare your program address (PubKey) inside votingdapp.spec.ts</a></h4>
<p>The pub-key of our 'votingdapp' will be provided as part of the second argument of the <code>startAnchor</code> function's <code>extraPrograms</code> array-parameter. <code>extraPrograms</code> here will be an array that contains just one object.</p>
<ul>
<li>By now your 'votingdapp' program will have a pubkey. Simply go to the <code>anchor - programs - src</code> folder and grab the string inside <code>declare_id!(&quot;&quot;)</code>, and use it to create a new <code>votingdappAddress' PublicKey</code> constant like so:</li>
</ul>
<pre><code class="language-rust">// imports
...

// IDL
...

const votingdappAddress = new PublicKey(&quot;AsjZ3kWAUSQRNt2pZVeJkywhZ6gpLpHZmJjduPmKZDZZ&quot;);

// describe
describe('votingdapp' () =&gt; {
	...
});

</code></pre>
<br />
<p><span style="color: orange;">7</span></p>
<h4 id="create-the-context-and-provider-for-the-initialize_poll-instruction-integration-test-case"><a class="header" href="#create-the-context-and-provider-for-the-initialize_poll-instruction-integration-test-case">Create the Context and Provider for the <code>Initialize_Poll</code> instruction integration test case:</a></h4>
<p>The first program instruction in our <code>votingdapp</code> to be tested is in our <code>votingdapp.spec.ts</code> is <code>Initialize_Poll</code>. We need to provide a context and provider for an integration test using modules <code>startAnchor</code> and <code>BankrunProvider</code> respectively.</p>
<pre><code class="language-ts">// imports
...

// IDL
...

// votingdappAddress PublicKey
...

describe('votingdapp', () =&gt; {
	it('Initialize Poll', async () =&gt; {
		const context = await startAnchor(
			'',
			[],
			[]
		);
		const provider = new BankrunProvider(context);
	});
});

</code></pre>
<p>Creating the <code>Context</code> and <code>Provider</code> allows us to interact with our smart contract.</p>
<p><code>startAnchor</code> comes from the <code>solana-bankrun</code> Node module, which is pre-installed.</p>
<p><code>BankrunProvider</code> comes from the <code>anchor-bankrun</code> Node module, which should come pre-installed.</p>
<p>You may find that your IDL automatically import <code>BankrunProvider</code> and <code>startAnchor</code> for you from NPM package <code>anchor-bankrun</code>. You may leave it as is because it would not affect your tests.</p>
<p>Your <code>votingdapp.spec.ts</code> should now look like this:</p>
<pre><code class="language-ts">import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { Keypair } from '@solana/web3.js';
import { Votingdapp } from '../target/types/votingdapp';
//import { BankrunProvider, startAnchor } from 'anchor-bankrun';
import { startAnchor } from 'solana-bankrun';
import { BankrunProvider } from 'anchor-bankrun';

const IDL = require('../target/idl/votingdapp.json');

describe('votingdapp', () =&gt; {
	it('Initialize Poll', async () =&gt; {
		const context = await startAnchor('', [], []); // its first arg specifies the path of the 'tests' folder which is local in most cases, hence the empty string value
		const provider = new BankrunProvider(context);
	});
});
</code></pre>
<br />
<p><span style="color: orange;">8</span></p>
<h4 id="provide-startanchor-context-an-extraprograms-object-value-as-the-only-array-item-for-startanchors-second-argument"><a class="header" href="#provide-startanchor-context-an-extraprograms-object-value-as-the-only-array-item-for-startanchors-second-argument">Provide 'startAnchor()'-context an extraPrograms object-value as the only array item for startAnchor()'s second argument</a></h4>
<p>Your <code>extraPrograms</code> array-parameter will contain just a single object value that has a signature of - <code>{name: '&lt;your-program-name-in-lowecase-characters', programId: &lt;your-program-address&gt;}</code>. Your <code>votingdapp.spec.ts</code> code should now look similar to this:</p>
<pre><code class="language-ts">import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { Keypair, PublicKey } from '@solana/web3.js';
import { Votingdapp } from '../target/types/votingdapp';
//import { BankrunProvider, startAnchor } from 'anchor-bankrun';
import { startAnchor } from 'solana-bankrun';
import { BankrunProvider } from 'anchor-bankrun';

const IDL = require('../target/idl/votingdapp.json');

const votingdappAddress = new PublicKey(
	'AsjZ3kWAUSQRNt2pZVeJkywhZ6gpLpHZmJjduPmKZDZZ'
);

describe('votingdapp', () =&gt; {
	it('Initialize Poll', async () =&gt; {
		const context = await startAnchor(
			'',
			[{ name: 'votingdapp', programId: votingdaapAddress }], // code update
			[]
		);
		const provider = new BankrunProvider(context);
	});
});
</code></pre>
<br />
<p><span style="color: orange;">9</span></p>
<h4 id="create-the-program-object-inside-your-it-integration-test-function"><a class="header" href="#create-the-program-object-inside-your-it-integration-test-function">Create the Program object inside your it (integration test) function</a></h4>
<p>This is where we would bring in our program type <code>Votingdapp</code> that was <a href="10.%20Testing%20Dapps.html#import-program-type-votingdapp-into-your-spects-test-file">imported here</a>, and pass-in the <code>IDL</code> and <code>provider</code> constants created <a href="10.%20Testing%20Dapps.html#integrate-your-idl-file-into-your-dapps-spects-code">here</a> and <a href="10.%20Testing%20Dapps.html#declare-your-program-address-pubkey-const-inside-votingdappspects-for-startanchors-extraprograms-use-inside-our-initialize_poll-it-function">here</a>, respectively.</p>
<p>This is what the code to create the Program object looks like:</p>
<pre><code class="language-ts">// imports
...

// IDL
...

// votingdappAddress PublicKey
...

describe('votingdapp' () =&gt; {
	it('Initialize Poll' async () =&gt; {
		// 'startAnchor()'-context
		...

		// BankrunProvider(context) provider
		...

		const votingdappProgram = new Program&lt;Votingdapp&gt;(
			IDL,
			provider
		)
	});
});

</code></pre>
<p>Your entire <code>votingdapp.spec.ts</code> code should now look like this:</p>
<pre><code class="language-ts">import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { Keypair, PublicKey } from '@solana/web3.js';
import { Votingdapp } from '../target/types/votingdapp';
//import { BankrunProvider, startAnchor } from 'anchor-bankrun';
import { startAnchor } from 'solana-bankrun'; // 'startAnchor' can also be imported from 'anchor-bankrun' just like in the above comment
import { BankrunProvider } from 'anchor-bankrun';

const IDL = require('../target/idl/votingdapp.json');

const votingdappAddress = new PublicKey(
	'AsjZ3kWAUSQRNt2pZVeJkywhZ6gpLpHZmJjduPmKZDZZ'
);

describe('votingdapp', () =&gt; {
	it('Initialize Poll', async () =&gt; {
		const context = await startAnchor(
			'',
			[{ name: 'votingddapp', programId: votingdappAddress }],
			[]
		);

		const provider = new BankrunProvider(context);

		const votingdappProgram = new Program&lt;Votingdapp&gt;(IDL, provider);
	});
});
</code></pre>
<br />
<p><span style="color: orange;">10</span></p>
<h4 id="interact-with-our-votingdappprogram-instructions-using-the-idl"><a class="header" href="#interact-with-our-votingdappprogram-instructions-using-the-idl">Interact with our 'votingdappProgram' instructions using the IDL</a></h4>
<p>To do this, we would simply await a call to <code>votingProgram.method.&lt;our-choice-instruction-to-test&gt;</code>.</p>
<p>We need to make sure to with provide the values needed for <our-choice-instruction-to-test>' method signature, for example, the <code>initialize_poll</code> instruction handler function inside our program has this method signature:</p>
<pre><code class="language-rust">...
pub fn initialize_poll(
	ctx: &lt;InitializePoll&gt;,
	poll_id: u64,
	description: String,
	poll_start: u64,
	poll_end: u64,
) -&gt; Result&lt;()&gt; {
	// ... function body ...
}
...
</code></pre>
<p>Hence the IDL interaction for it is as follows:</p>
<pre><code class="language-typescript">/*
	votingdapp.spec.ts
*/

// imports
...

// IDL
...

// votingdappAddress: PublicKey(&quot;&quot;)
...

describe('votingdapp', () =&gt; {
	it('Initialize Poll', async () =&gt; {
		// startAnchor()-context
		...

		// BankrunProvider(context)-provider
		...

		// initializePoll is for our `iniitialize poll` it() function for our smart-contract / program's votingdapp.spec.ts
		await votingdappProgram.methods.initializePoll(
			new anchor.BN(1), // BN is how we create a u64 in TypeScript
			&quot;What is your favorite type of peanut butter&quot;,
			new anchor.BN(0),
			new anchor.BN(1821246480),
		)
		.rpc(); // the rpc() call executes the instruction within our program
	});
});
</code></pre>
<p>Your <code>votingdapp.spec.ts</code> should now look similar to this:</p>
<pre><code class="language-typescript">import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { Keypair, PublicKey } from '@solana/web3.js';
import { Votingdapp } from '../target/types/votingdapp';
import { BankrunProvider, startAnchor } from 'anchor-bankrun';
//import { startAnchor } from 'solana-bankrun';
//import { BankrunProvider } from 'anchor-bankrun';

const IDL = require('../target/idl/votingdapp.json');

const votingdappAddress = new PublicKey(
	'AsjZ3kWAUSQRNt2pZVeJkywhZ6gpLpHZmJjduPmKZDZZ'
);

describe('votingdapp', () =&gt; {
	it('Initialize Poll', async () =&gt; {
		const context = await startAnchor(
			'',
			[{ name: 'votingdapp', programId: votingdappAddress }],
			[]
		);
		const provider = new BankrunProvider(context);

		const votingdappProgram = new Program&lt;Votingdapp&gt;(IDL, provider);

		await votingdappProgram.methods
			.initializePoll(
				new anchor.BN(1),
				'What is your favorite type of peanut butter',
				new anchor.BN(0),
				new anchor.BN(1821246680)
			)
			.rpc();
	});
});
</code></pre>
<br />
<p><span style="color: orange;">11</span></p>
<h4 id="verify-your-anchortomls-programslocalnet-attribute-key-matches-the-name-of-your-spects-file"><a class="header" href="#verify-your-anchortomls-programslocalnet-attribute-key-matches-the-name-of-your-spects-file">Verify your Anchor.toml's &quot;[programs.localnet]&quot; attribute key matches the name of your .spec.ts file:</a></h4>
<p>Your <code>Anchor.toml</code> file can be found inside the <code>anchor</code> folder inside your dapp project's working directory. Open this file make sure that your <code>[programs.localnet]</code> attribute's key has the correct name that matches your <code>.spec.ts</code> file. In our case it is <code>votingdapp</code>. You can find the <code>[programs.localnet]</code> attribute on line-8 of your <code>Anchor.toml</code> file.</p>
<p>If you have been following the naming convention used in this guide, then your <code>[programs.localnet]</code> key should be called <code>votingdapp</code>. If you named things as done in the bootcamp's course video it would be <code>voting</code> instead.</p>
<br />
<p><span style="color: orange;">12</span></p>
<h4 id="run-the-anchor-test-command"><a class="header" href="#run-the-anchor-test-command">Run the anchor test command:</a></h4>
<p>You can simply run the command provided below if you do not currently have the <code>solana-test-validator</code> running in the background because the <code>anchor test</code> command would fire up <code>solana-test-validator</code>.</p>
<pre><code class="language-bash">anchor test --skip-deploy
</code></pre>
<p>If you already have <code>solana-test-validator</code> running then you need to use this command instead to skip the <code>anchor test</code> command from also running the <code>solana-test-validator</code> tool:</p>
<pre><code class="language-bash">anchor test --skip-local-validator --skip-deploy
</code></pre>
<p>You should now see some tests passed similar to what I had here:</p>
<p><img src="./assets/votingdapp.spec.ts-test-setup-output.png" alt="A screenshot of $: anchor test --skip-deploy command's ouput result" title="My '$: anchor test --skip-deploy' output result" /></p>
<hr />
<h4 id="writing-actual-tests-for-our-votingdapp"><a class="header" href="#writing-actual-tests-for-our-votingdapp">Writing actual tests for our 'votingdapp'</a></h4>
<p>The above <code>.spec.ts</code> file doesn't actually test anything, it merely gave us the setup to do tests, using the <code>initial_poll</code> integration test as an example to do dapp tests. Lets now continue working on the <code>initial_poll</code> <code>it()</code>-test example.</p>
<p>You see, your Solana program is not the only thing that has an address, an <code>Account</code> also has its own address, something we would need to use in order to actually write proper tests.</p>
<h4 id="to-test-any-solana-instruction-in-spects"><a class="header" href="#to-test-any-solana-instruction-in-spects">To test any Solana instruction in '<your-dapp-program>.spec.ts':</a></h4>
<ul>
<li>Pull the address of the <code>Account</code>-<code>context</code> used in your target instruction (function) that you wish to test.
For example, in our <code>Votingdapp</code> program's case where we wished to test the <code>intialize_poll</code> instruction (function) that used the <code>IntializePoll</code> <code>Account</code>-<code>context</code> ~ <code>PollAccount</code> <code>account</code>, we had to first pull the address of the <code>InitializePoll</code> <code>Account</code> itself, using our <code>Votingdapp</code> program's address like this:</li>
</ul>
<pre><code class="language-ts">/*
	votingdapp.spec.ts
*/

// imports
...

// IDL
...

// votingdappAddress: PublicKey(&quot;&quot;)
...

describe('votingdapp', () =&gt; {
	it('Initialize Poll', async () =&gt; {
		// startAnchor()-context
		...

		// BankrunProvider(context)-provider
		...

		// votingdappProgram.methods.initializePoll instruction invocation
		...

		const [pollAddress] = PublicKey.findProgramAddressSync(
			// Grab the buffer from a u64
			[new anchor.BN(1).toArrayLike(Buffer, 'le', 8)],
			votingdappAddress // our Votingdapp program address
		)
	});
});

</code></pre>
<br/>
<p><span style="color: orange;">Good to know 1:</span></p>
<p>How does a test function know the correct <code>Account</code> address to pull? An <code>Account</code>'s seeds is exactly how an integration test function knows the correct <code>Account</code> address to pull. The test function examines the array-items you provide to <code>PublicKey.findProgramAddressSync([], &lt;your-dapp-address&gt;)</code> and then finds the <code>Account</code> that best match the array items in a given <code>Account</code>'s seed requirements specifed in the <code>Account</code>'s <code>#[instruction(&lt;one-or-more-seeds&gt;)]</code>. The <code>it()</code> test function must also have a name that matches the <code>Account</code>'s name (ignoring white-spaces and the character-casing).</p>
<br/>
<ul>
<li>Inside your target <code>it()</code>-test function, you (may) then need to fetch the <code>[account]</code>(s) inside the <code>Account</code> which you want to test, by using the <code>Account</code>'s address to locate the <code>Account</code> and reference one or more <code>[accounts]</code> specified in the <code>Account</code>, for example:</li>
</ul>
<pre><code class="language-ts">/*
	votingdapp.spec.ts
*/

// imports
...

// IDL
...

// votingdappAddress: PublicKey(&quot;&quot;)
...

describe('votingdapp', () =&gt; {
	it('Initialize Poll', async () =&gt; {
		// startAnchor()-context
		...

		// BankrunProvider(context)-provider
		...

		// votingdappProgram.methods.initializePoll instruction invocation
		...

		// PublicKey.findProgramAddressSync(...)-pollAddress
		...

		const poll = await votingdappProgram.account.poll.fetch(pollAddress);
	});
});

</code></pre>
<p>Our <code>votingdapp.spec.ts</code> should look like this for now:</p>
<pre><code class="language-ts">import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { Keypair, PublicKey } from '@solana/web3.js';
import { Votingdapp } from '../target/types/votingdapp';
import { BankrunProvider, startAnchor } from 'anchor-bankrun';
//import { startAnchor } from 'solana-bankrun';
//import { BankrunProvider } from 'anchor-bankrun';

const IDL = require('../target/idl/votingdapp.json');

const votingdappAddress = new PublicKey(
	'AsjZ3kWAUSQRNt2pZVeJkywhZ6gpLpHZmJjduPmKZDZZ'
);

describe('votingdapp', () =&gt; {
	it('Initialize Poll', async () =&gt; {
		const context = await startAnchor(
			'',
			[{ name: 'votingdapp', programId: votingdappAddress }],
			[]
		);
		const provider = new BankrunProvider(context);

		const votingdappProgram = new Program&lt;Votingdapp&gt;(IDL, provider);

		await votingdappProgram.methods
			.initializePoll(
				new anchor.BN(1),
				'What is your favorite type of peanut butter',
				new anchor.BN(0),
				new anchor.BN(1821246680)
			)
			.rpc();

		const [pollAddress] = PublicKey.findProgramAddressSync(
			// Grab the buffer from a u64
			[new anchor.BN(1).toArrayLike(Buffer, 'le', 8)],
			votingdappAddress // our Votingdapp program address
		);

		const poll = await votingdappProgram.account.poll.fetch(pollAddress); // Think of poll has our direct access to data inside PollAccount' account
	});
});
</code></pre>
<ul>
<li>We can even log an <code>[account]</code> that is inside an <code>Account</code>-<code>context</code>, e.g log <code>[account]</code> <code>Poll</code> inside <code>Account</code>-<code>context</code> <code>InitializePoll</code>. Let us add <code>expects</code> for an <code>[account]</code> (in this case <code>[account]</code> <code>Poll</code>) to our 'Initialize Poll' integration test function:</li>
</ul>
<pre><code class="language-ts">/*
	votingdapp.spec.ts
*/

// imports
...

// IDL
...

// votingdappAddress: PublicKey(&quot;&quot;)
...

describe('votingdapp', () =&gt; {
	// let context, provider, votingdappProgram
	...

	// beforeAll(async() =&gt; {...})
	...

	it('Initialize Poll' async () =&gt; {
		// context: startAnchor()
		...
		// provider: Bankrun(Provider(context)
		...

		// votingdappProgram: Program&lt;Votingdapp&gt;
		...

		// await votingdappProgram.methods.initializePoll(...).rpc();
		...

		// [pollAddress]: PublicKey.findProgramAddressSync(...)
		...

		const poll = await votingdappProgram.account.poll.fetch(pollAddress);

		console.log(poll);

		expect(poll.pollId.toNumber()).toEqual(1);
		expect(poll.description).toEqual('What is your favorite peanut butter');
		expect(poll.pollStart.toNumber()).toBeLessThan(poll.pollEnd.toNumber());
	})
});

</code></pre>
<hr />
<h4 id="now-lets-make-votingdappspects-better"><a class="header" href="#now-lets-make-votingdappspects-better">Now let's make 'votingdapp.spec.ts' better:</a></h4>
<p>We can introduce a <code>beforeAll()</code> method that runs before any of our <code>it()</code> test function and simply instantiates variables we'll re-use in various <code>it()</code> functions, just once. It also makes <code>votingdapp.spec.ts</code> more compact. Here's what that looks like:</p>
<pre><code class="language-ts">import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { Keypair, PublicKey } from '@solana/web3.js';
import { Votingdapp } from '../target/types/votingdapp';
import { BankrunProvider, startAnchor } from 'anchor-bankrun';
//import { startAnchor } from 'solana-bankrun';
//import { BankrunProvider } from 'anchor-bankrun';

const IDL = require('../target/idl/votingdapp.json');

const votingdappAddress = new PublicKey(
	'AsjZ3kWAUSQRNt2pZVeJkywhZ6gpLpHZmJjduPmKZDZZ'
);

describe('votingdapp', () =&gt; {
	let context;
	let provider;
	let votingdappProgram: Program&lt;Votingdapp&gt;;

	beforeAll(async () =&gt; {
		context = await startAnchor(
			'',
			[{ name: 'votingdapp', programId: votingdappAddress }],
			[]
		);
		provider = new BankrunProvider(context);

		votingdappProgram = new Program&lt;Votingdapp&gt;(IDL, provider);
	});
	it('Initialize Poll', async () =&gt; {
		await votingdappProgram.methods
			.initializePoll(
				new anchor.BN(1),
				'What is your favorite type of peanut butter',
				new anchor.BN(0),
				new anchor.BN(1821246680)
			)
			.rpc();

		const [pollAddress] = PublicKey.findProgramAddressSync(
			// Grab the buffer from a u64
			[new anchor.BN(1).toArrayLike(Buffer, 'le', 8)],
			votingdappAddress // our Votingdapp program address
		);

		const poll = await votingdappProgram.account.poll.fetch(pollAddress); // Think of poll has our direct access to data inside PollAccount' account

		console.log(poll);

		expect(poll.pollId.toNumber()).toEqual(1);
		expect(poll.description).toEqual(
			'What is your favorite type of peanut butter'
		);
		expect(poll.pollStart.toNumber()).toBeLessThan(poll.pollEnd.toNumber());
	});
});
</code></pre>
<hr />
<h4 id="integration-tests-for-instruction-initialize_candidate-in-our-votingdapp-program"><a class="header" href="#integration-tests-for-instruction-initialize_candidate-in-our-votingdapp-program">Integration tests for instruction 'initialize_candidate' in our 'votingdapp' Program:</a></h4>
<pre><code class="language-ts">// 'votingdapp.spec.ts':

// imports
...

// IDL
...

// votingdappAddress: PublicKey(&quot;&quot;)
...

describe('votingdapp', () =&gt; {
	// let context, provider, votingdappProgram
	...

	// beforeAll(async() =&gt; {...})
	...

	// it('Initialize Poll', async () =&gt; {...});
	...

	it('initialize candidate', async () =&gt; {
		await votingdappProgram.methods
		.initializeCandidate('Smooth', new anchor.BN(1))
		  .rpc();
		await votingdappProgram.methods
		.initializeCandidate('Smooth', new anchor.BN(1))
		  .rpc();

		const [crunchyAddress] = PublicKey.findProgramAddressSync(
			[
				new anchor.BN(1).toArrayLike(Buffer, 'le', 8),
				Buffer.from('Crunchy'),
			],
			votingdappAddress,
		);
		const crunchyCandidate = await votingdappProgram.account.candidate.fetch(crunchyAddress);
		console.log(crunchyCandidate);
		expect(crunchyCandidate.candidateVotes.toNumber()).toEqual(0);

		const [smoothAddress] = PublicKey.findProgramAddressSync(
			[
				new anchor.BN(1).toArrayLike(Buffer, 'le', 8),
				Buffer.from('Smooth'),
			],
			votingdappAddress,
		);
		const smoothCandidate = await votingdappProgram.account.candidate.fetch(smoothAddress);
		console.log(smoothCandidate);
		expect(smoothCandidate.candidateVotes.toNumber()).toEqual(0);
	})
});

</code></pre>
<br/>
<p><span style="color: orange;">Good to know 2:</span></p>
<p>In the code snippet above, pay attention to the <code>initializeCandidate(...)</code> method. Two things must hold true in its <code>await votingdappProgram.methods.initializeCandidate(...).rpc();</code> call to make the test work. Firstly, its name - <code>initializeCandidate</code> must match the instruction (function) we want to test which in the above example's case was <code>initialize_candidate</code> (ignoring the underscore <code>_</code> character and the letter-casing). Secondly, the arguments passed-in to <code>initializeCandidate(...)</code> must fulfill the requirement of the instruction (function) <code>initialize_candidate</code>'s <code>Account</code>-<code>context</code> which was - <code>#[instruction(candidate_name: String, poll_id: u64)]</code>.</p>
<p><span style="color: orange;">Good to know 3:</span></p>
<p>Also in the test code snippet above, <code>crunchyAddress</code> was extracted with <code>PublicKey.findProgramAddressSync([new anchor.BN(1).toArrayLike(Buffer, 'le', 8), Buffer.from('Crunchy')], votingdappAddress,)</code>. Pay attention to the argument passed as array-items to <code>PublicKey.findProgramAddressSync(...)</code>'s array argument - it must be in the order that you specify the seed for the <code>[account]</code> you are trying to extract inside an instruction's <code>Account</code>-<code>context</code>, an in the above example's case, the seed for <code>[account]</code> <code>candidate</code> was <code>poll_id.to_le_bytes().as_ref(), candidate_name.as_bytes()]</code>.</p>
<br/>
<h4 id="integration-tests-for-instruction-vote-in-our-votingdapp-program"><a class="header" href="#integration-tests-for-instruction-vote-in-our-votingdapp-program">Integration tests for instruction 'vote' in our 'votingdapp' Program:</a></h4>
<pre><code class="language-ts">// 'votingdapp.spec.ts':
// imports
...

// IDL
...

// votingdappAddress: PublicKey(&quot;&quot;)
...

describe('votingdapp', () =&gt; {
	// let context, provider, votingdappProgram
	...

	// beforeAll(async() =&gt; {...})
	...

	// it('Initialize Poll', async () =&gt; {...});
	...

	it('vote', async () =&gt; {
		await votingdappProgram.methods
		  .vote(
			&quot;Smooth&quot;,
			new anchor.BN(1)
		  )
		  .rpc();

		const [smoothAddress] = PublicKey.findProgramAddressSync(
			[
				new anchor.BN(1).toArrayLike(Buffer, 'le', 8), Buffer.from('Smooth')
			],
			votingdappAddress,
		);
		const smoothCandidate = await votingdappProgram.account.candidate.fetch(smoothAddress);
		console.log(smoothCandidate);
		expect(smoothCandidate.candidateVotes.toNumber()).toEqual(1);
	})

});

</code></pre>
<hr />
<h4 id="votingdappspects"><a class="header" href="#votingdappspects">'votingdapp.spec.ts':</a></h4>
<p>This is the final look of our <code>votingdapp.spec.ts</code>:</p>
<pre><code class="language-ts">/*
vscode-remote://wsl%2Bubuntu-22.04/home/iodaps/solana-github/bootcamp-temp/voting-dapp/anchor/tests/votingdapp.spec.ts
*/

import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { Keypair, PublicKey } from '@solana/web3.js';
import { Votingdapp } from '../target/types/votingdapp';
import { BankrunProvider, startAnchor } from 'anchor-bankrun';
//import { startAnchor } from 'solana-bankrun';
//import { BankrunProvider } from 'anchor-bankrun';

const IDL = require('../target/idl/votingdapp.json');

const votingdappAddress = new PublicKey(
	'AsjZ3kWAUSQRNt2pZVeJkywhZ6gpLpHZmJjduPmKZDZZ'
);

describe('votingdapp', () =&gt; {
	let context;
	let provider;
	let votingdappProgram: Program&lt;Votingdapp&gt;;

	beforeAll(async () =&gt; {
		context = await startAnchor(
			'',
			[{ name: 'votingdapp', programId: votingdappAddress }],
			[]
		);
		provider = new BankrunProvider(context);
		votingdappProgram = new Program&lt;Votingdapp&gt;(IDL, provider);
	});
	// Test 1:
	it('Initialize Poll', async () =&gt; {
		await votingdappProgram.methods
			.initializePoll(
				new anchor.BN(1),
				'What is your favorite type of peanut butter',
				new anchor.BN(0),
				new anchor.BN(1821246680)
			)
			.rpc();

		const [pollAddress] = PublicKey.findProgramAddressSync(
			// Grab the buffer from a u64
			[new anchor.BN(1).toArrayLike(Buffer, 'le', 8)],
			votingdappAddress // our Votingdapp program address
		);

		const poll = await votingdappProgram.account.poll.fetch(pollAddress); // Think of poll has our direct access to data inside PollAccount' account

		console.log(poll);

		expect(poll.pollId.toNumber()).toEqual(1);
		expect(poll.description).toEqual(
			'What is your favorite type of peanut butter'
		);
		expect(poll.pollStart.toNumber()).toBeLessThan(poll.pollEnd.toNumber());
	});

	// Test 2:
	it('Initialize Candidate', async () =&gt; {
		await votingdappProgram.methods
			.initializeCandidate('Smooth', new anchor.BN(1))
			.rpc();
		await votingdappProgram.methods
			.initializeCandidate('Crunchy', new anchor.BN(1))
			.rpc();

		const [crunchyAddress] = PublicKey.findProgramAddressSync(
			[new anchor.BN(1).toArrayLike(Buffer, 'le', 8), Buffer.from('Crunchy')],
			votingdappAddress
		);
		const crunchyCandidate = await votingdappProgram.account.candidate.fetch(
			crunchyAddress
		);
		console.log(crunchyCandidate);
		expect(crunchyCandidate.candidateVotes.toNumber()).toEqual(0);

		const [smoothAddress] = PublicKey.findProgramAddressSync(
			[new anchor.BN(1).toArrayLike(Buffer, 'le', 8), Buffer.from('Smooth')],
			votingdappAddress
		);
		const smoothCandidate = await votingdappProgram.account.candidate.fetch(
			smoothAddress
		);
		console.log(smoothCandidate);
		expect(smoothCandidate.candidateVotes.toNumber()).toEqual(0);
	});

	// Test 3:
	it('vote', async () =&gt; {
		await votingdappProgram.methods.vote('Smooth', new anchor.BN(1)).rpc();

		const [smoothAddress] = PublicKey.findProgramAddressSync(
			[new anchor.BN(1).toArrayLike(Buffer, 'le', 8), Buffer.from('Smooth')],
			votingdappAddress
		);
		const smoothCandidate = await votingdappProgram.account.candidate.fetch(
			smoothAddress
		);
		console.log(smoothCandidate);
		expect(smoothCandidate.candidateVotes.toNumber()).toEqual(1);
	});
});
</code></pre>
<hr />
<br/>
<h4 id="key-notes"><a class="header" href="#key-notes">Key Notes</a></h4>
<p><b>Writing Tests for Solana Dapps in General :</b></p>
<p>Moving on, we should note the requirements for our <code>&lt;dapp&gt;.spec.ts</code> test file to work, namely;</p>
<ul>
<li>
<p>Your <code>fixtures</code> which is the binary file of your dapp. <a href="10.%20Testing%20Dapps.html#choose-the-target-smart-contract-program-to-test">See Here</a></p>
</li>
<li>
<p>Your IDL which is a JSON file that must be linked inside your <code>&lt;dapp&gt;.spec.ts</code> file. <a href="10.%20Testing%20Dapps.html#integrate-your-idl-file-into-your-dapps-spects-code">See Here</a></p>
</li>
<li>
<p>Your Dapp's type which must be imported into your <code>&lt;dapp&gt;.spec.ts</code> file. <a href="10.%20Testing%20Dapps.html#import-program-type-votingdapp-into-your-spects-test-file">See Here</a></p>
</li>
</ul>
<p>Your <code>.spec.ts</code> file with the basic import requirements:</p>
<pre><code class="language-ts">import * as anchor from '@coral-xyz/anchor';
import { Program } from '@coral-xyz/anchor';
import { Keypair, PublicKey } from '@solana/web3.js';
import { Ourdapp } from '../target/types/ourdapp';
import { BankrunProvider, startAnchor } from 'anchor-bankrun';
</code></pre>
<p>Some variables must be provided inside your <code>dapp.spec.ts</code>'s <code>describe()</code> function, preferably inside a <code>beforeAll()</code> nested first inside our <code>describe()</code>. Here's an example:</p>
<pre><code class="language-ts">// imports
...

const IDL = require('../target/idl/ourdapp.json');

const ourdappAddress = new PublicKey(
  'AsjZ3kWAUSQRNt2pZVeJkywhZ6gpLpHZmJjduPmKZDZZ'
);

describe('ourdapp', () =&gt; {
	let context;
	let provider;
	let ourdappProgram: Program&lt;Ourdapp&gt;;

	beforeAll(async () =&gt; {
		context = await startAnchor(
			'',
			[{ name: 'ourdapp', programId: ourdappAddress }],
			[]
		);
		provider = new BankrunProvider(context);

		ourdappProgram = new Program&lt;Ourdapp&gt;(IDL, provider);
	});

	it();
});
</code></pre>
<p>We also now know that inside each integration test / <code>it()</code> function, we need to:</p>
<ul>
<li>Use the <code>PublicKey.findProgramAddressSync()</code> function to find the address of the <code>[account]</code> transacted ( initialized or modified) through the <code>Account</code>-<code>context</code> of the instruction (function) we wish to test. <b>Note that:</b> You have to provide the appropriate seeds for the <code>Account</code>-<code>context</code> of the instruction (function) in the exact order specified inside the instruction (function) as array item(s) to <code>PublicKey.findProgramAddressSync([...], &lt;your-dapp-address-here&gt;)</code>'s arrray argument in the <b>exact order specified in both the instruction-function and the <code>Account</code></b>, and then provide your dapp address as the second argument to <code>PublicKey.findProgramAddressSync()</code> as <code>PublicKey.findProgramAddressSync([...], ourDappAddress)</code>.</li>
</ul>
<pre><code class="language-ts">describe('ourdapp', () =&gt; {
	let context;
	let provider;
	let ourdappProgram;

	beforeAll(async () =&gt; {
		...
	});
	// it test for instruction-function `do_some_a`
	it('Do Some A Test', async () =&gt; {
		const [someAAddress] = PublicKey.findProgramAddressSync(
			[new anchor.BN(1).toArrayLike(Buffer, 'le', 8)], // The seeds for 'Some_A_Instruction 'Account'-context of the instruction-function we are testing
			ourdappAddress
		);
	});
});
</code></pre>
<ul>
<li>We can initialize values for the instruction handler that we wish to test. Here is an example code:</li>
</ul>
<pre><code class="language-ts">describe('ourdapp', () =&gt; {
	let context;
	let provider;
	let ourdappProgram: Program&lt;Ourdapp&gt;;

	beforeAll(async () =&gt; {
		context = await startAnchor(
			'',
			[{ name: 'ourdapp', programId: ourdappAddress }],
			[]
		);
		provider = new BankrunProvider(context);

		ourdappProgram = new Program&lt;Ourdapp&gt;(IDL, provider);
	});
	// 'do_some_a' it test:
	it('Do Some A', async () =&gt; {
		// Get the address of Some_A '[account]'
		const [someAAddress] = PublicKey.findProgramAddressSync(
			...
		);

		// Initialize the values for 'Do_Some_A' Account
		await ourdappProgram.methods
			.initializeSomeA(
				new anchor.BN(1),
				new anchor.BN(0),
				new anchor.BN(1821246680)
			)
			.rpc();
	});
});
</code></pre>
<ul>
<li>Fetch the actual <code>[account]</code> stored in our Instruction / <code>Account</code>, using the addess of the <code>[account]</code>, e.g, the address of <code>[account]</code> - <code>someAAdress</code>:</li>
</ul>
<pre><code class="language-ts">describe('ourdapp', () =&gt; {
	let context;
	let provider;
	let ourdappProgram: Program&lt;Ourdapp&gt;;

	beforeAll(async () =&gt; {
		context = await startAnchor(
			'',
			[{ name: 'ourdapp', programId: ourdappAddress }],
			[]
		);
		provider = new BankrunProvider(context);

		ourdappProgram = new Program&lt;Votingdapp&gt;(IDL, provider);
	});
	// Integration Test - 'Some Test A'
	it('Some A Test', async () =&gt; {
		// Get the address of Do_Some_A 'Account'
		const [doSomeAAddress] = PublicKey.findProgramAddressSync(
			[new anchor.BN(1).toArrayLike(Buffer, 'le', 8)], // The seeds for [account] 'Some_A' inside 'Some_A_Instruction 'Account'
			ourdappAddress
		);

		// Initialize the values for some_a '[account]' inside DoSomeA 'Account'
		await ourdappProgram.methods
			.doSomeA(new anchor.BN(1), new anchor.BN(0), new anchor.BN(1821246680))
			.rpc();

		// Actual someA [account] initiated for testing purposes
		const accountSomeA = await ourdappProgram.account.some_a.fetch(
			someAAddress
		);
	});
});
</code></pre>
<p>Timestamp - [1:13:46 - 1:27:09],
[1:27:09 - 1:49:59]</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="solana-actions--blinks"><a class="header" href="#solana-actions--blinks">Solana Actions & Blinks</a></h3>
<p>In this project 3, we are going to bring the previous voting application (<code>votingdapp</code>) to people's favorite websites using Solana <code>Actions</code> and <code>Blinks</code>.</p>
<h4 id="what-is-a-solana-action"><a class="header" href="#what-is-a-solana-action">What is a Solana Action</a></h4>
<p>Solana <code>Actions</code> are a specification for an API that can return a transaction on Solana to be previewed, sign, and sent. Whether it is a button, website or QR code, actions make it simple for developers to integrate the things you can do throughout the Solana ecosystem right into your environment.</p>
<h4 id="what-is-a-solana-blink"><a class="header" href="#what-is-a-solana-blink">What is a Solana Blink</a></h4>
<p>Solana <code>Blinks</code> are blockchain links. They turn any action into a shareable link, allowing any website that supports links to be the starting point of a Solana transaction. As a result, blinks transform websites or social media into a platform for executing transactions all without taking the user elsewhere.</p>
<p>Any website could be the surface for you rnew application, creating both a decentralized and user-friendly experience.</p>
<hr />
<p>In practice, Actions resemble a typical REST API call. A user interacting with a website would trigger a get call to retrieve information about what actions are available. Following the list of available actions, the user can then choose an Action to execute, which will then start the transaction signing process.</p>
<p><img src="./assets/Solana-Blinks-and-Actions-Illustration.png" alt="Screenshot of Solana Blinks and Actions Illustration" title="Solana Blinks and Action diagramatic explanation" /></p>
<p>We will be making all our votes in our previous application be actions, allowing them to be executed without a traditional front-end with the help of blinks (as the front-end).</p>
<hr />
<p>Now that we've had an overview of blinks and actions, let's get started building them.</p>
<p>Timestamp - [1:50:00 - 1:51:56]</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="add-blinks-and-actions-tovotingdapp-developed-earlier"><a class="header" href="#add-blinks-and-actions-tovotingdapp-developed-earlier">Add Blinks and Actions to'votingdapp' Developed Earlier</a></h3>
<h4 id="preparing-the-votingdapp-project-for-adding-blinks-and-actions"><a class="header" href="#preparing-the-votingdapp-project-for-adding-blinks-and-actions">Preparing the 'votingdapp' project for adding Blinks and Actions:</a></h4>
<p>On this page, we'll add Blinks and Actions to our previously created <code>votingdapp</code> project, and there is a lot of different amount of work that we'd have to do for Blinks and Actions. We will be referencing the <a href="https://solana.com/docs/advanced/actions">Solana Actions and Blinks documentation page</a> to prepare our <code>votingdapp</code> project for adding Blinks and Actions to it.</p>
<p><span style="color: orange;">1</span></p>
<h4 id="deploy-your-dapp-eg-votingdapp"><a class="header" href="#deploy-your-dapp-eg-votingdapp">Deploy your dapp (e.g, 'votingdapp'):</a></h4>
<p>In the previous chapter ('Project 2: Voting Application'), we used <code>anchor-bankrun</code> to run tests in the <a href="10.%20Testing%20Dapps.html">Testing Dapps</a> page. However, in this chapter, we will need the local test validator to test our dapp that has some UI bootstrap on top of it.</p>
<p>Let us first go into our <code>anchor</code> folder and perfom an Anchor deploy operation. Now this might be different based off your Solana config, so actually, you might need to check your Solana config first with - <code>$ solana config get</code>. We need to set our config environment to local (RPC URL: http://localhost:8999).</p>
<p>Set your Solana config environment to local if it isn't already set to local:</p>
<pre><code class="language-bash">solana config set -ul
</code></pre>
<p>Now we can run the anchor deployment command:</p>
<pre><code class="language-bash">anchor deploy
</code></pre>
<p>The above command will deploy your dapp project's binary, e.g, <code>votingdapp.so</code>. to the blockchain.</p>
<p>If <code>$: anchor deploy</code> fails to work with an error message <span style="color: #722f37; font-size: 12; font-weight: 600;">error sending request for url (http://127.0.01;8099): error trying to connect: tcp connect error: Connection refused (os error 111)</span>, then it means that your 'solana-test-validator' is not running. You can fix the error by just running <code>$: solana-test-validator</code> to start the 'solana-test-validator' which is a requirement to deploy your anchor smart contract locally. Upon starting the 'solana-test-validator', retry the <code>$: anchor deploy</code> command.</p>
<p>Check your successfully deployed program at <a href="https://explorer.solana.com/">https://explorer.solana.com/</a> - switch from <code>Mainnet Beta</code> to <code>Custom RPC URL</code>, then copy, paste, and enter the <code>Program Id</code> displayed on your terminal into the search bar that has a placeholder text that says - <small style="font-size: 14.5px; letter-spacing: 0.25px;">Search for blocks, accounts, transactions, programs, and tokens</small>.</p>
<p>After successfully deploying your dapp to the local validator (using <code>solana-test-validator</code>), and searching for your dapps's <code>Program Id</code> on <a href="explorer.solana.com">explorer.solana.com</a>, you should see something somewhat similar to the following:</p>
<p><img src="./assets/explorer.solana.com-votingdapp-Program-Id-search-result.png" alt="Screenshot of explorer.solana.com votingdapp Program Id search" title="Result of the search for our votingdapp Program Id on Solana Explorer" /></p>
<p><span style="color: orange;">Good to know 1:</span></p>
<p>The <code>solana-test-validator</code> command when run for the first time, creates a new folder called <code>test-ledger</code> inside the working directory where the command is run. If you delete this folder and re-run the command, the folder will simply be recreated.</p>
<br/>
<p><span style="color: orange;">2</span></p>
<h4 id="install-solanaactions"><a class="header" href="#install-solanaactions">Install @solana/actions:</a></h4>
<p>Go into your project's root directory. If you currently inside the <code>anchor</code> directory, then you have to <code>$ cd ..</code> so you can be inside your project's root directory. Use the command below to install <code>@solana/actions</code>:</p>
<p>NPM:</p>
<pre><code class="language-bash">npm install @solana/actions
</code></pre>
<br/>
<p><span style="color: orange;">3</span></p>
<h4 id="run-your-dapp"><a class="header" href="#run-your-dapp">Run your dapp</a></h4>
<p>Let us now run our <code>votingdapp</code> in dev mode:</p>
<pre><code>npm run dev
</code></pre>
<br/>
<p><span style="color: orange;">4</span></p>
<h4 id="create-a-get-request-to-get-the-right-information-to-do-our-actions"><a class="header" href="#create-a-get-request-to-get-the-right-information-to-do-our-actions">Create a GET request to get the right information to do our Actions:</a></h4>
<p>We need to structure our request in such a way that follows the guidelines specified in the Solana Actions documentation page' URL schema here - <a href="https://solana.com/docs/advanced/actions#url-scheme">https://solana.com/docs/advanced/actions#url-scheme</a>.</p>
<ul>
<li>
<p>We will write the URL Schema for our Actions inside a <code>route.ts</code> code-file located at - <code>web</code> - <code>app</code> - <code>api</code>. For you, the right folder may be <code>src</code> - <code>app</code> - <code>api</code>. Create a new sub-folder named <code>votingdapp</code> inside the <code>api</code> folder. Please note that in the bootcamp's video, the new folder was named <code>voting</code> instead of <code>votingdapp</code>.</p>
</li>
<li>
<p>Now copy the <code>route.ts</code> code file inside <code>.../api/hello</code> into our previous created new <code>.../api/votingdapp</code> sub-folder. The copied <code>route.ts</code> files should have the following content:</p>
</li>
</ul>
<pre><code class="language-ts">export async function GET(request: Request) {
	return new Response('Hello, from API!');
}
</code></pre>
<ul>
<li>You can check out the newly created route by opening <code>localhost:3000/api/votingdapp</code>. You will find the text <code>Hello, from API!</code> written on your screen.</li>
</ul>
<p><span style="color: orange;">Good to know 2:</span></p>
<p>The template we have chosen to build our dapp from spins up a basic NextJS server-side app for working with blinks, which should be noted to be quite a heavy application for these blinks. NextJS server side is quite heavy for this for this usage. It is recommended to use a Node JS server - like an Express server if you can. But because we have a scaffold and we will later on in the course build the actual frontend for the voting application, we are just going to use this backend and bootstrap it with this voting Action.</p>
<br/>
<p><span style="color: orange;">5</span></p>
<h4 id="return-valuable-information-in-order-to-display-the-blink-on-any-social-media"><a class="header" href="#return-valuable-information-in-order-to-display-the-blink-on-any-social-media">Return valuable information in order to display the blink on any social media</a></h4>
<p>The expected metadata response after an Action client makes a GET request to an Action provider for its available Actions is a JSON body-payload that follows the specification of <code>ActionGetResponse</code>:</p>
<pre><code class="language-ts">export type ActionType = 'action' | 'completed';

export type ActionGetResponse = Action&lt;'action'&gt;;

export interface Action&lt;T extends ActionType&gt; {
	/** type of Action to present to the user */
	type: T;
	/** image url that represents the source of the action request */
	icon: string;
	/** describes the source of the action request */
	title: string;
	/** brief summary of the action to be performed */
	description: string;
	/** button text rendered to the user */
	label: string;
	/** UI state for the button being rendered to the user */
	disabled?: boolean;
	links?: {
		/** list of related Actions a user could perform */
		actions: LinkedAction[];
	};
	/** non-fatal error message to be displayed to the user */
	error?: ActionError;
}
</code></pre>
<p>Fields <code>icon</code>, <code>title</code>, <code>description</code>, and <code>label</code> are required. The remaining fields are optional. We will also need to provide CORS information. For now our <code>api/votingdapp</code>'s <code>route.ts</code> now looks like this:</p>
<pre><code class="language-ts">import { ActionGetResponse } from '@solana/actions';

export async function GET(request: Request) {
	const actionMetadata: ActionGetResponse = {
		icon: 'https://zestfulkitchen.com/wp-content/uploads/2021/09/Peanut-butter_hero_for-web-2.jpg',
		title: 'Vote for your favorite type of peanut butter!',
		description: 'Vote between crunchy and smooth peanut butter',
		label: 'Vote',
	};
	return Response.json(actionMetadata);
}
</code></pre>
<p><span style="color: orange;">Good to know 3:</span></p>
<p>You can test your blinks using the <a href="dial.to">dial.to</a> website. To use <code>dial.to</code> to test your blinks, you'd include the localhost link to your blink within the <code>dial.to</code> route, similar to this - <code>https://dial.to/?action=solana-action:http://localhost:3000/api/&lt;your-blink-here&gt;</code>. Make sure to avoid CORS related errors. Read the <a href="12.%20Adding%20Blinks%20&amp;%20Actions%20to%20Our%20Dapp.html#check-out-your-blink-visually-using-dialto-and-fix-cors-errors">step 6</a> to know exactly how to prevent CORS-related errors that prevent your blinks from loading when testing blinks.</p>
<br/>
<p><span style="color: orange;">6</span></p>
<h4 id="check-out-your-blink-visually-using-dialto-and-fix-cors-errors"><a class="header" href="#check-out-your-blink-visually-using-dialto-and-fix-cors-errors">Check out your blink visually using dial.to, and fix CORS errors</a></h4>
<p>In our case, we can use the <code>dial.to</code> website to have a visual representation of what our blink looks like by using the this specific link - <code>https://dial.to/?action=solana-action:http://localhost:3000/api/votingdapp</code>. Upon visiting this link, you'd realise that the blink actually fails to load and is thus, blank. That's because we are yet to fix CORS (Cross Origin Resource Sharing) requirement that your browser has in place to keep you safe online.</p>
<p><img src="./assets/dial.to-blink-cors-error-screenshot.png" alt="dial.to Blink CORS error screenshot" title="https://dial.to blink CORS error" /></p>
<p>Let's fix the error by modifying our <code>api/votingdapp/route.ts</code> file:</p>
<pre><code class="language-ts">/* route.ts */

import { ActionGetResponse } from '@solana/actions';

export async function GET(request: Request) {
	const actionMetadata: ActionGetResponse = {
		icon: 'https://zestfulkitchen.com/wp-content/uploads/2021/09/Peanut-butter_hero_for-web-2.jpg',
		title: 'Vote for your favorite type of peanut butter!',
		description: 'Vote between crunchy and smooth peanut butter',
		label: 'Vote',
	};
	return Response.json(actionMetadata);
}
</code></pre>
<p>After making the above modifications, our Action can now be served by a blink, and if you check our the link to our blink using the appropriate <code>dial.to</code> link to our blink, our blink should now load.</p>
<p>We get a warning that your blink is not yet registered, and that's okay for us since we are just testing to make sure it works how we want it to for now. The warning is there to let you know blinks that are known by a blink registry. Using an unknown blink is done at your own risk:</p>
<p><img src="./assets/loaded-but-partially-finished-blink.png" alt="Loaded but partially finished blink" title="Dial.to warning that our blink is yet to be registered" /></p>
<p>Alright, so now we at least have our blink on display using <code>dial.to</code>, but our blink can't post a voting Action. If you click the vote button, you will in fact get a CORS and POST network error.</p>
<p><span style="color: orange;">Good to know 4:</span></p>
<p>Part of the whole system for onboarding blinks as of the time of the bootcamp 2024, onto social-media, is that you have to actually get your Action registered via some kind of registry out there, e.g. Dialect.</p>
<br/>
<p><span style="color: orange;">7</span></p>
<h4 id="respond-with-metadata-and-available-actions"><a class="header" href="#respond-with-metadata-and-available-actions">Respond with metadata and available Actions</a></h4>
<p>Let's first prevent a CORS error when making a request inside our blink e.g cliking the <code>vote</code> button to vote inside our <code>votingdapp</code> blink rendered with <code>dial.to</code>.</p>
<pre><code class="language-ts">/*
  src/app/api/votingdapp/route.ts
*/

// imports
...

export const OPTIONS = GET

// export async function GET(request: Request)
...

</code></pre>
<p>Next, we have to update the <code>route.ts</code> for our Blink with the correct <code>LinkedAction</code> metadata so we can showcase corresponding available Actions inside the blink. The <code>ActionGetResponse</code> <a href="12.%20Adding%20Blinks%20&amp;%20Actions%20to%20Our%20Dapp.html#return-valuable-information-in-order-to-display-the-blink-on-any-social-media">spec</a> allows us to specify a <code>LinkedAction</code> value to its <code>links?</code> attribute which is what specifies a list of related Actions for a Blink user to possibly perform. For more details about <code>LinkedActions</code> spec, check <a href="https://solana.com/docs/advanced/actions#get-response-body">this page of Solana docs</a>.</p>
<p>And since in our <code>votingdapp</code>, we would be performing one of two different post Actions to vote either Crunchy or Smooth, our <code>ActionGetResponse</code>' <code>links</code> field is specified as:</p>
<pre><code class="language-ts">...

links: {
    actions: [
        {
            label: &quot;Vote for Crunchy&quot;,
            href: &quot;/api/vote?candidate=crunchy&quot;,
            type: &quot;post&quot;,
        },
        {
            label: &quot;Vote for Smooth&quot;,
            href: &quot;/api/vote?candidate=smooth&quot;,
            type: &quot;post&quot;,
        }
    ]
}
</code></pre>
<p>The <code>route.ts</code> for our <code>votingdapp</code> API now lookS like this after specifying a <code>LinkedAction</code> value for our <code>ActionGetResponse</code>' (GET Response body)<code>links?:</code> field:</p>
<pre><code class="language-ts">/* 
  src/app/api/votingdapp/route.ts 
*/

import { ActionGetResponse, ACTIONS_CORS_HEADERS } from '@solana/actions';

export const OPTIONS = GET;

export async function GET(request: Request) {
	const actionMetadata: ActionGetResponse = {
		icon: 'https://zestfulkitchen.com/wp-content/uploads/2021/09/Peanut-butter_hero_for-web-2.jpg',
		title: 'Vote for your favorite type of peanut butter!',
		description: 'Vote between crunchy and smooth peanut butter',
		label: 'Vote',
		links: {
			actions: [
				{
					label: 'Vote for Cruchy',
					href: '/api/vote?candidate=crunchy',
					type: 'post',
				},
				{
					label: 'Vote for Smooth',
					href: '/api/vote?candidate=smooth',
					type: 'post',
				},
			],
		},
	};
	return Response.json(actionMetadata, { headers: ACTIONS_CORS_HEADERS });
}
</code></pre>
<br/>
<p><span style="color: orange;">8</span></p>
<h4 id="make-a-post-request-with-the-blink-users-wallet-pubkey"><a class="header" href="#make-a-post-request-with-the-blink-users-wallet-pubkey">Make a 'POST' request with the blink user's wallet pubkey</a></h4>
<p>Let's now create a new function called <code>POST</code> for this purpose.</p>
<p>Inside this function, we will need to grab the URL from the request, and the search parameter inside the same URL.</p>
<pre><code class="language-ts">/*
  src/app/api/votingdapp/route.ts
*/

...

export async function POST(request: Request) {
    const url = new URL(request.url);
    const candidatae = url.searchParams.get(&quot;candidate&quot;);
}

</code></pre>
<p>In our <code>votingdapp</code>, we need to make sure that the vote-candidate given is a valid candidate - 'Crunchy' or Smooth without giving the blink user a strange error in case they someone enter a non-existing candidate.</p>
<pre><code class="language-ts">/*
  src/app/api/votingdapp/route.ts
*/

...

export async function POST(request: Request) {
    const url = new URL(request.url);
    const candidatae = url.searchParams.get(&quot;candidate&quot;);

    if (candidate != &quot;crunchy&quot; &amp;&amp; candidate != &quot;smooth&quot;) {
        return new Response(&quot;Invalid candidate&quot;, { status: 400 });
    }
}

</code></pre>
<p>Create the transaction to send back after the POST request completes. In order to create transactions, we need a few things - a blockhash, a message, and any signatures that we possibly need to send to be added to that transaction.</p>
<p>Fortunately for us in our <code>votingdapp</code> case though, we don't need any signatures on the server side because we don't care about signing anything on the server-side.</p>
<hr />
<p>WHAT IS THE CONNECTION FOR?</p>
<p>You need to provide a commitment status when you create a connection inside the POST function:</p>
<pre><code class="language-ts">const connection = new Connection('http://127.0.0.1:8899', 'confirmed');
</code></pre>
<p><span style="color: orange;">Good to know 4:</span></p>
<p>There are various commitment status levels such as; &quot;process&quot;, &quot;confirmed&quot;, &quot;finalized&quot;. And they tell us how certain it is that a transaction would make it on the cluster. Commitment status level <code>process</code> says - hey, I found it, it's not yet confirmed. Commitment status level <code>confirmed</code> means - it's confirmed by 66% of the actual cluster. And then <code>finalized</code> says - it's confirmed by 66% and there's been 31 blocks afterwards that were also confirmed. <code>finalized</code> takes a lot longer, <code>confirmed</code> is generally safe - at the time of the bootcamp's recording, there's never been something that was confirmed that didn't make it to finalized.</p>
<hr />
<p>All right, so next, we will grab all the information that we need from the URL (connection we just created). The information we need are;</p>
<ul>
<li>The account that the user signed with on the Blink in order to create the transaction body</li>
<li>The body of the POST request</li>
</ul>
<hr />
<p><span style="color: orange;">Side Note:</span></p>
<p>Moving forward with this guidebook, it is assumed that you now have a Solana wallet. This guidebook makes use of the phantom wallet. Please go to the official Phantom website - <a href="https://phantom.com">https://phantom.com</a>, and install the Phantom extention on your favorite browser(s). This guide also assumes that you created a <code>seed phrase wallet</code>.</p>
<hr />
<p>Timestamp - [1:51:56 - ]</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
